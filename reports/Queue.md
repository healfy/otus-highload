# Отчет по заданию 5 (Очереди)

План:

1. Миграция новостей done
2. Эндпоинт создания новостей руками 
3. Запись в кафку после добавления хобби или друга 
4. Запись из кафки в базу (bulk?) (как это делать в фаст апи)?
5. Писать в редис новости для каждого юзера (список друзей, список новостей, кешить токен!)
6. Эндпоинт ленты юзера (предусмотреть запуск без кеша)
7. Прогрев кеша (на старте, по эндпоинту)

### Структура новости:

`id` guid  
`author_id` id  
`type` str  
`payload` json
`created` timestamp

index by `author`, `created`

Новости генерятся:

Запостить новость  
Добавить в друзья  
Добавить хобби  

### Структура кеша

Для каждого юзера в кеше храним список друзей

Новость пушится в 2 очереди:

Добавление в кеш 
Добавление в базу  

#### Добавление в кеш




## Инвалидация кеша?
