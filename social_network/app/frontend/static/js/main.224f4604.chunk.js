(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),s=n(18),i=n.n(s),u=n(14),o=n(8),l=n(9),b=n(11),d=n(10),j=n(35),p=n(26),h=n(17),f=n(100),O=n(13),m=n.n(O),v=n(24),x=n(4),g=n(77),y=n.n(g),D="SHOW_MESSAGE",k="HIDE_MESSAGE",E="SHOW_LOADER",_="HIDE_LOADER",S="LOGIN_SUCCESS",C="LOGIN_FAILED",R="GET_USER_DATA",w="REGISTER_SUCCESS",A="REGISTER_FAILED",U="LOGOUT",q="GET_USER_SUCCESS",F="ADD_HOBBY",T="DELETE_HOBBY",I="GET_USERS",N="CLEAR_USERS",L="CLEAR_USER",P="DELETE_FRIENDSHIP",G="ADD_FRIEND_REQUEST",H="DELETE_FRIEND_REQUEST",W="ACCEPT_FRIEND_REQUEST",M="DECLINE_FRIEND_REQUEST",B="GET_FRIEND_REQUEST_USERS",z="GET_MESSAGES",Q="CLEAR_MESSAGES",Y="GET_CHAT_USER",J="CLEAR_CHAT_USER",K="ACCESS_TOKEN",X="WAITING",V="DECLINED",Z=function(e){var t={};return e.data.detail.forEach((function(e){var n=e.loc[e.loc.length-1];t[n]=e.msg})),t},$=function(){var e=localStorage.getItem(K);if(!e)return null;var t=JSON.parse(e);return t.expired_at<(new Date).getTime()/1e3?null:t},ee=function(e,t){var n=encodeURIComponent(e);return t.map((function(e){return"".concat(n,"=").concat(encodeURIComponent(e))})).join("&")},te=function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},ne=function(e,t){var n=e.map((function(e){return e.id})),r=Array.from(e);return t.forEach((function(e){n.includes(e.id)||(n.push(e.id),r.push(e))})),r.sort((function(e,t){return e.created<t.created?-1:1}))},re=n(57),ae=n(94),ce=n(95),se={id:0,value:"",user_id:0,expired_at:""},ie={id:0,first_name:"",last_name:"",age:0,gender:null,city:"",hobbies:[]},ue={userData:{isAuthenticated:!!$(),authentication:$()||se,user:ie,friends:[],friendRequests:[],friendRequestUsers:[]},chat:{user:ie,messages:[]},user:ie,users:[],requestCount:0,message:"",registerErrors:{email:null,first_name:null,last_name:null,password:null,city:null,age:null,gender:null,general:null},loginErrors:{email:null,password:null},error:""},oe=Object(h.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case D:return Object(x.a)(Object(x.a)({},e),{},{message:n});case k:return Object(x.a)(Object(x.a)({},e),{},{message:""});case E:return Object(x.a)(Object(x.a)({},e),{},{requestCount:e.requestCount+1});case _:return Object(x.a)(Object(x.a)({},e),{},{requestCount:e.requestCount-1});case w:return Object(x.a)(Object(x.a)({},e),{},{registerErrors:{}});case A:return Object(x.a)(Object(x.a)({},e),{},{registerErrors:n});case S:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{authentication:n,isAuthenticated:!0}),loginErrors:{}});case C:return Object(x.a)(Object(x.a)({},e),{},{loginErrors:n});case U:return Object(x.a)(Object(x.a)({},e),{},{userData:{user:ie,friends:[],friendRequests:[],friendRequestUsers:[],authentication:se,isAuthenticated:!1}});case R:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{user:n.user,friends:n.friends,friendRequests:n.friendRequests})});case q:return Object(x.a)(Object(x.a)({},e),{},{user:n});case L:return Object(x.a)(Object(x.a)({},e),{},{user:ie});case F:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{user:Object(x.a)(Object(x.a)({},e.userData.user),{},{hobbies:[].concat(Object(re.a)(e.userData.user.hobbies),[n])})})});case T:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{user:Object(x.a)(Object(x.a)({},e.userData.user),{},{hobbies:e.userData.user.hobbies.filter((function(e){return e.id!==n}))})})});case I:return Object(x.a)(Object(x.a)({},e),{},{users:n});case N:return Object(x.a)(Object(x.a)({},e),{},{users:[]});case P:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{friends:e.userData.friends.filter((function(e){return e.id!==n}))})});case G:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{friendRequests:[].concat(Object(re.a)(e.userData.friendRequests),[n])})});case H:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{friendRequests:e.userData.friendRequests.filter((function(e){return e.id!==n}))})});case W:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{friendRequests:e.userData.friendRequests.filter((function(e){return e.id!==n.requestId})),friends:[].concat(Object(re.a)(e.userData.friends),[n.friend])})});case M:var r=e.userData.friendRequests,a=r.filter((function(e){return e.id!==n})),c=r.find((function(e){return e.id===n}));return c.status=V,Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{friendRequests:[].concat(Object(re.a)(a),[c])})});case B:return Object(x.a)(Object(x.a)({},e),{},{userData:Object(x.a)(Object(x.a)({},e.userData),{},{friendRequestUsers:n})});case Y:return Object(x.a)(Object(x.a)({},e),{},{chat:Object(x.a)(Object(x.a)({},e.chat),{},{user:n})});case J:return Object(x.a)(Object(x.a)({},e),{},{chat:Object(x.a)(Object(x.a)({},e.chat),{},{user:ie})});case z:return Object(x.a)(Object(x.a)({},e),{},{chat:Object(x.a)(Object(x.a)({},e.chat),{},{messages:ne(e.chat.messages,n)})});case Q:return Object(x.a)(Object(x.a)({},e),{},{chat:Object(x.a)(Object(x.a)({},e.chat),{},{messages:[]})});default:return e}}),ue,Object(ce.composeWithDevTools)(Object(h.applyMiddleware)(ae.a)));var le="/api/v1",be={timeout:2e4,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}},de=y.a.create(be),je=function(){var e=oe.getState(),t=Object(x.a)(Object(x.a)({},be),{},{headers:Object(x.a)(Object(x.a)({},be.headers),{},{"X-Auth-Token":e.userData.authentication&&e.userData.authentication.value})});return y.a.create(t)},pe=function(e){return function(t){t({type:D,payload:e}),setTimeout((function(){return t({type:k})}),3e3)}},he=function(){return function(e){e({type:E})}},fe=function(){return function(e){e({type:_})}},Oe=function(e,t){return function(){var n=Object(v.a)(m.a.mark((function n(r){var a,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(he()),a=!1,n.prev=2,n.next=5,de.post("".concat(le,"/auth/login"),{email:e,password:t});case 5:c=n.sent,a=!0,s=c.data,localStorage.setItem(K,JSON.stringify(s)),r({type:S,payload:c.data}),n.next=23;break;case 11:n.prev=11,n.t0=n.catch(2),console.log(n.t0),n.t1=n.t0.response.status,n.next=422===n.t1?17:400===n.t1?19:21;break;case 17:return r({type:C,payload:Z(n.t0.response)}),n.abrupt("break",22);case 19:return r({type:C,payload:{email:n.t0.response.data.detail}}),n.abrupt("break",22);case 21:r({type:C,payload:{general:"Unexpected error"}});case 22:r(pe("Login failed"));case 23:return r(fe()),n.abrupt("return",a);case 25:case"end":return n.stop()}var s}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},me=function(){return function(e){localStorage.removeItem(K),e({type:U})}},ve=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r,a,c,s,i,u,o,l,b;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=je(),t.prev=1,a=r.get("".concat(le,"/users/").concat(e,"/")),c=r.get("".concat(le,"/users/?friends_of=").concat(e)),s=r.get("".concat(le,"/friendships/")),t.next=7,Promise.all([a,c,s]);case 7:i=t.sent,u=Object(f.a)(i,3),o=u[0],l=u[1],b=u[2],n({type:R,payload:{user:o.data,friends:l.data||[],friendRequests:b.data||[]}}),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0),n(pe("Auth data failed. Please reload page."));case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},xe=function(e){var t=e.email,n=e.password,r=e.first_name,a=e.last_name,c=e.age,s=e.gender,i=e.city;return function(){var e=Object(v.a)(m.a.mark((function e(u){var o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(he()),o={email:t,password:n,first_name:r,last_name:a,age:c,gender:s,city:i},l=!1,e.prev=3,e.next=6,de.post("".concat(le,"/auth/register"),o);case 6:l=!0,u(pe("Success!")),u({type:w}),e.next=23;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),u(pe("Registration failed")),e.t1=e.t0.response.status,e.next=422===e.t1?18:400===e.t1?20:22;break;case 18:return u({type:A,payload:Z(e.t0.response)}),e.abrupt("break",23);case 20:return u({type:A,payload:{email:e.t0.response.data.detail}}),e.abrupt("break",23);case 22:u({type:A,payload:{general:"Unexpected error"}});case 23:return u(fe()),e.abrupt("return",l);case 25:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!1,n(he()),t.prev=2,t.next=5,de.get("".concat(le,"/users/").concat(e,"/"));case 5:a=t.sent,r=!0,n({type:q,payload:a.data}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0),n(pe("Get user failed"));case 14:return n(fe()),t.abrupt("return",r);case 16:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},ye=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(he()),r=je(),t.prev=2,t.next=5,r.post("".concat(le,"/hobbies/"),{name:e});case 5:return a=t.sent,t.next=8,r.put("".concat(le,"/users/hobbies/").concat(a.data.id,"/"));case 8:n({type:F,payload:a.data}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0),n(pe("Add hobby failed"));case 15:n(fe());case 16:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},De=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(he()),r=je(),t.prev=2,t.next=5,r.delete("".concat(le,"/users/hobbies/").concat(e,"/"));case 5:n({type:T,payload:e}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0),n(pe("Delete hobby failed"));case 12:n(fe());case 13:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()},ke=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(he()),t.prev=1,t.next=4,de.get("".concat(le,"/users/?friends_of=").concat(e));case 4:r=t.sent,n({type:I,payload:r.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),n(pe("Get friends failed"));case 12:n(fe());case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},Ee=function(){return function(e){e({type:L})}},_e=function(){return function(e){e({type:N})}},Se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return function(){var a=Object(v.a)(m.a.mark((function a(c){var s,i;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(he()),s=te({first_name:e,last_name:t,page:n,paginate_by:r}),a.prev=2,a.next=5,de.get("".concat(le,"/users/?").concat(s));case 5:i=a.sent,c({type:I,payload:i.data}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),console.log(a.t0),c(pe("Get users failed"));case 13:c(fe());case 14:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}()},Ce=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=je(),n(he()),t.prev=2,t.next=5,r.delete("".concat(le,"/friendships/friendship/").concat(e,"/"));case 5:n({type:P,payload:e}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0),n(pe("Friendship deleting failed"));case 12:n(fe());case 13:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()},Re=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=je(),n(he()),t.prev=2,t.next=5,r.post("".concat(le,"/friendships/").concat(e,"/"));case 5:a=t.sent,n({type:G,payload:a.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0),n(pe("Add friend failed"));case 13:n(fe());case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},we=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=je(),n(he()),t.prev=2,t.next=5,r.delete("".concat(le,"/friendships/").concat(e,"/"));case 5:n({type:H,payload:e}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0),n(pe("Friend request deleting failed"));case 12:n(fe());case 13:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()},Ae=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r,a,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=je(),n(he()),t.prev=2,t.next=5,r.put("".concat(le,"/friendships/accept/").concat(e,"/"));case 5:return a=t.sent,t.next=8,r.get("".concat(le,"/users/").concat(a.data.friend_id,"/"));case 8:c=t.sent,n({type:W,payload:{requestId:e,friend:c.data}}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0),n(pe("Friend request accepting failed."));case 16:n(fe());case 17:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()},Ue=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=je(),n(he()),t.prev=2,t.next=5,r.put("".concat(le,"/friendships/decline/").concat(e,"/"));case 5:n({type:M,payload:e}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0),n(pe("Friend request declining failed."));case 12:n(fe());case 13:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()},qe=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(he()),t.prev=1,t.next=4,de.get("".concat(le,"/users/?").concat(ee("ids",e)));case 4:r=t.sent,n({type:B,payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:n(fe());case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},Fe=function(){return function(e){return e({type:J})}},Te=function(){return function(e){return e({type:Q})}},Ie=function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!1,n(he()),t.prev=2,t.next=5,de.get("".concat(le,"/users/").concat(e,"/"));case 5:a=t.sent,r=!0,n({type:Y,payload:a.data}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0),n(pe("Get user failed"));case 14:return n(fe()),t.abrupt("return",r);case 16:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return function(){var a=Object(v.a)(m.a.mark((function a(c){var s,i,u,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=[],i=te({to_user_id:e,after_timestamp:t,page:n,paginate_by:r}),u=je(),a.prev=4,a.next=7,u.get("".concat(le,"/messages/?").concat(i));case 7:o=a.sent,s=o.data,c({type:z,payload:s}),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(4),console.log(a.t0),c(pe("Get messages failed"));case 16:return a.abrupt("return",s.length>0);case 17:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e){return a.apply(this,arguments)}}()},Le=function(e,t){return function(){var n=Object(v.a)(m.a.mark((function n(r){var a,c,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=!1,c=je(),r(he()),n.prev=3,n.next=6,c.post("".concat(le,"/messages/"),{to_user_id:e,text:t});case 6:s=n.sent,a=!0,r({type:z,payload:[s.data]}),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),console.log(n.t0),r(pe("Send message failed"));case 15:return r(fe()),n.abrupt("return",a);case 17:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}()},Pe=n(198),Ge=n(196),He=n(58),We=n(205),Me=n(188),Be=n(207),ze=n(201),Qe=n(190);function Ye(e){var t=e.input,n=t.name,a=t.onChange,c=t.value,s=Object(He.a)(t,["name","onChange","value"]),i=e.meta,u=e.submitError,o=e.style,l=Object(He.a)(e,["input","meta","submitError","style"]),b=o||{};return Object(r.jsx)(We.a,Object(x.a)(Object(x.a)({},l),{},{name:n,helperText:i.touched?i.error||u:void 0,error:(i.error||u)&&i.touched,inputProps:s,onChange:a,value:c,style:Object(x.a)({margin:10,minWidth:"60%"},b),id:"outlined-basic",variant:"outlined"}))}function Je(e){var t=e.input,n=t.name,a=t.onChange,c=t.value,s=Object(He.a)(t,["name","onChange","value"]),i=e.meta,u=e.submitError,o=e.label,l=e.options,b=Object(He.a)(e,["input","meta","submitError","label","options"]);return Object(r.jsxs)(Me.a,{variant:"outlined",style:{margin:10,minWidth:"60%"},children:[Object(r.jsx)(Be.a,{id:"demo-simple-select-outlined-label",children:o}),Object(r.jsx)(ze.a,Object(x.a)(Object(x.a)({},b),{},{name:n,helperText:i.touched?i.error||u:void 0,error:(i.error||u)&&i.touched,inputProps:s,labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:c,onChange:a,label:o,children:Object.keys(l).map((function(e){return Object(r.jsx)(Qe.a,{value:e,children:l[e]},"select"+e)}))}))]})}var Ke=function(e){return e?void 0:"Required"},Xe=n(208),Ve={marginTop:"3px",marginRight:"5px"},Ze=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.hobbies,t=Math.random().toString(36).substring(7);return Object(r.jsx)(r.Fragment,{children:e.map((function(e){return Object(r.jsx)(Xe.a,{label:e.name,style:Ve},t+e.id)}))})}}]),n}(c.a.Component),$e=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.userData,t=e&&e.isAuthenticated;return Object(r.jsx)(c.a.Fragment,{children:t?Object(r.jsx)(p.a,{to:{pathname:"/".concat(e.authentication.user_id)}}):this.props.children})}}]),n}(c.a.Component),et=Object(u.b)((function(e){return{userData:e.userData}}),null)($e),tt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.userData,t=e&&e.isAuthenticated;return Object(r.jsx)(c.a.Fragment,{children:t?this.props.children:Object(r.jsx)(p.a,{to:{pathname:"/login"}})})}}]),n}(c.a.Component),nt=Object(u.b)((function(e){return{userData:e.userData}}),null)(tt),rt=n(21),at=n(191),ct=n(192),st=n(193),it=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).toPath=r.toPath.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"toPath",value:function(e){this.props.history.push(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isAuthenticated,a=t.logout,c=t.user;return Object(r.jsx)(at.a,{position:"static",children:Object(r.jsxs)(ct.a,{children:[Object(r.jsx)(st.a,{color:"inherit",onClick:function(){return e.toPath("/")},children:"Social Network"}),n&&Object(r.jsxs)(st.a,{color:"inherit",onClick:function(){return e.toPath("/login")},children:[c.first_name," ",c.last_name]}),n&&Object(r.jsx)(st.a,{color:"inherit",onClick:a,children:"Logout"}),!n&&Object(r.jsx)(st.a,{color:"inherit",onClick:function(){return e.toPath("/login")},children:"Login"}),!n&&Object(r.jsx)(st.a,{color:"inherit",onClick:function(){return e.toPath("/register")},children:"Register"}),Object(r.jsx)(Rt,{})]})})}}]),n}(c.a.Component),ut=Object(u.b)((function(e){return{isAuthenticated:e.userData.isAuthenticated,user:e.userData.user}}),(function(e){return Object(h.bindActionCreators)({logout:me},e)}))(Object(p.g)(it)),ot=n(194),lt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleDelete=r.handleDelete.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"handleDelete",value:function(){var e=this.props,t=e.user;(0,e.deleteFriendship)(t.id)}},{key:"render",value:function(){return Object(r.jsx)(Xe.a,{label:"Friend",onDelete:this.handleDelete,color:"primary"})}}]),n}(c.a.Component),bt=Object(u.b)(null,(function(e){return Object(h.bindActionCreators)({deleteFriendship:Ce},e)}))(lt),dt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleAdd=r.handleAdd.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"handleAdd",value:function(){var e=this.props,t=e.user;(0,e.addFriendRequest)(t.id)}},{key:"render",value:function(){return Object(r.jsx)(Xe.a,{label:"Add Friend",onClick:this.handleAdd})}}]),n}(c.a.Component),jt=Object(u.b)(null,(function(e){return Object(h.bindActionCreators)({addFriendRequest:Re},e)}))(dt),pt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleAccept=r.handleAccept.bind(Object(rt.a)(r)),r.handleDecline=r.handleDecline.bind(Object(rt.a)(r)),r.getFriendRequest=r.getFriendRequest.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"getFriendRequest",value:function(){var e=this.props,t=e.userData,n=e.user;return t.friendRequests.find((function(e){return e.to_user===t.user.id&&e.from_user===n.id}))}},{key:"handleAccept",value:function(e){this.props.acceptFriendRequest(e.id)}},{key:"handleDecline",value:function(e){this.props.declineFriendRequest(e.id)}},{key:"render",value:function(){var e=this,t=this.getFriendRequest();return Object(r.jsx)(Xe.a,{label:"Accept",onDelete:function(){return e.handleDecline(t)},onClick:function(){return e.handleAccept(t)},color:"secondary"})}}]),n}(c.a.Component),ht=Object(u.b)((function(e){return{userData:e.userData}}),(function(e){return Object(h.bindActionCreators)({acceptFriendRequest:Ae,declineFriendRequest:Ue},e)}))(pt),ft=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleDelete=r.handleDelete.bind(Object(rt.a)(r)),r.getFriendRequest=r.getFriendRequest.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"getFriendRequest",value:function(){var e=this.props,t=e.userData,n=e.user;return t.friendRequests.find((function(e){return e.from_user===t.user.id&&e.to_user===n.id}))}},{key:"handleDelete",value:function(e){this.props.deleteFriendRequest(e.id)}},{key:"render",value:function(){var e=this,t=this.getFriendRequest(),n=t.status===X?"Waiting user response":"User decline your request";return Object(r.jsx)(Xe.a,{label:n,onDelete:function(){return e.handleDelete(t)},color:"secondary"})}}]),n}(c.a.Component),Ot=Object(u.b)((function(e){return{userData:e.userData}}),(function(e){return Object(h.bindActionCreators)({deleteFriendRequest:we},e)}))(ft),mt={YOU:function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)(Xe.a,{label:"You",color:"primary"})}}]),n}(c.a.Component),FRIEND:bt,WAITING_YOU_RESPONSE:ht,WAITING_USER_RESPONSE:Ot,UNKNOWN:jt},vt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getComponent",value:function(){var e=this.props,t=e.user,n=e.userData,r=n.user;return n.isAuthenticated?t.id===n.authentication.user_id?mt.YOU:n.friends.find((function(e){return e.id===t.id}))?mt.FRIEND:n.friendRequests.find((function(e){return e.from_user===r.id&&e.to_user===t.id}))?mt.WAITING_USER_RESPONSE:n.friendRequests.find((function(e){return e.to_user===r.id&&e.from_user===t.id}))?mt.WAITING_YOU_RESPONSE:mt.UNKNOWN:mt.UNKNOWN}},{key:"render",value:function(){var e=this.getComponent();return Object(r.jsx)(e,{user:this.props.user})}}]),n}(c.a.Component),xt=Object(u.b)((function(e){return{userData:e.userData}}),null)(vt),gt=n(59),yt={display:"flex",justifyContent:"space-between"},Dt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.isAuthenticated;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(gt.a,{variant:"h6",component:"h2",style:yt,children:[Object(r.jsxs)(j.b,{to:"/".concat(t.id),children:[t.first_name," ",t.last_name]}),n&&Object(r.jsx)(xt,{user:t})]}),n&&Object(r.jsx)(j.b,{to:"/chat/".concat(t.id),children:Object(r.jsx)(st.a,{variant:"contained",color:"primary",children:"Chat"})}),Object(r.jsxs)("p",{children:[Object(r.jsx)("b",{children:"Age:"})," ",t.age]}),t.city&&Object(r.jsxs)("p",{children:[Object(r.jsx)("b",{children:"City:"})," ",t.city]}),t.gender&&Object(r.jsxs)("p",{children:[Object(r.jsx)("b",{children:"Gender:"})," ",t.gender]})]})}}]),n}(c.a.Component),kt=Object(u.b)((function(e){return{isAuthenticated:e.userData.isAuthenticated}}),null)(Dt),Et={padding:"10px",height:"90%"},_t=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.user;return Object(r.jsxs)(ot.a,{style:Et,children:[Object(r.jsx)(kt,{user:e}),Object(r.jsx)(Ze,{hobbies:e.hobbies})]})}}]),n}(c.a.Component),St=n(195),Ct=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:!!this.props.requestCount&&Object(r.jsx)(St.a,{color:"inherit"})})}}]),n}(c.a.Component),Rt=Object(u.b)((function(e){return{requestCount:e.requestCount}}),null)(Ct),wt=n(204),At=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.message;return Object(r.jsx)(wt.a,{open:!!e,anchorOrigin:{vertical:"top",horizontal:"right"},message:e,severity:"error"})}}]),n}(c.a.Component),Ut=Object(u.b)((function(e){return{message:e.message}}),null)(At),qt=n(22),Ft=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.errors;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsx)(qt.a,{name:"email",validate:Ke,type:"email",children:function(e){var t=e.input,a=e.meta;return Object(r.jsx)(Ye,{input:t,meta:a,label:"Email",submitError:n.email})}}),Object(r.jsx)(qt.a,{name:"password",type:"password",validate:Ke,children:function(e){var t=e.input,a=e.meta;return Object(r.jsx)(Ye,{input:t,meta:a,label:"Password",submitError:n.password})}}),n.general&&Object(r.jsx)("div",{children:n.general}),Object(r.jsx)("div",{children:Object(r.jsx)(st.a,{variant:"contained",color:"primary",type:"submit",size:"large",children:"Submit"})})]})}}]),n}(c.a.Component),Tt=Object(u.b)((function(e){return{errors:e.loginErrors}}),null)(Ft),It={minWidth:"50%",minHeight:"200px",padding:"20px",margin:"40px",textAlign:"center",justifyContent:"center"},Nt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleSubmit=r.handleSubmit.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"handleSubmit",value:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.login(t.email,t.password);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsxs)(ot.a,{style:It,children:[Object(r.jsx)(gt.a,{variant:"h4",component:"h2",children:"Login"}),Object(r.jsx)(qt.b,{component:Tt,onSubmit:this.handleSubmit})]})}}]),n}(c.a.Component),Lt=Object(u.b)(null,(function(e){return Object(h.bindActionCreators)({login:Oe},e)}))(Nt),Pt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.errors,a={MALE:"Male",FEMALE:"Female",OTHER:"Other"};return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsx)(qt.a,{name:"email",validate:Ke,type:"email",children:function(e){var t=e.input,a=e.meta;return Object(r.jsx)(Ye,{input:t,meta:a,label:"Email",placeholder:"Email",submitError:n.email})}}),Object(r.jsx)(qt.a,{name:"password",type:"password",validate:Ke,children:function(e){var t=e.input,a=e.meta;return Object(r.jsx)(Ye,{input:t,meta:a,label:"Password",placeholder:"Password",submitError:n.password})}}),Object(r.jsx)(qt.a,{name:"confirm",type:"password",validate:Ke,children:function(e){var t=e.input,n=e.meta;return Object(r.jsx)(Ye,{input:t,meta:n,label:"Confirm password",placeholder:"Confirm",submitError:null})}}),Object(r.jsx)(qt.a,{name:"first_name",validate:Ke,children:function(e){var t=e.input,a=e.meta;return Object(r.jsx)(Ye,{input:t,meta:a,label:"First Name",placeholder:"First Name",submitError:n.first_name})}}),Object(r.jsx)(qt.a,{name:"last_name",children:function(e){var t=e.input,a=e.meta;return Object(r.jsx)(Ye,{input:t,meta:a,label:"Last Name",placeholder:"Last Name",submitError:n.last_name})}}),Object(r.jsx)(qt.a,{name:"city",children:function(e){var t=e.input,a=e.meta;return Object(r.jsx)(Ye,{input:t,meta:a,label:"City",placeholder:"City",submitError:n.city})}}),Object(r.jsx)(qt.a,{name:"gender",children:function(e){var t=e.input,c=e.meta;return Object(r.jsx)(Je,{input:t,meta:c,label:"Gender",submitError:n.gender,options:a})}}),Object(r.jsx)(qt.a,{name:"age",type:"number",validate:Ke,children:function(e){var t=e.input,a=e.meta;return Object(r.jsx)(Ye,{input:t,meta:a,label:"Age",placeholder:"Age",submitError:n.age})}}),n.general&&Object(r.jsx)("div",{children:n.general}),Object(r.jsx)("div",{children:Object(r.jsx)(st.a,{variant:"contained",color:"primary",type:"submit",size:"large",children:"Submit"})})]})}}]),n}(c.a.Component),Gt=Object(u.b)((function(e){return{errors:e.registerErrors}}),null)(Pt),Ht={minWidth:"50%",minHeight:"200px",padding:"20px",margin:"40px",textAlign:"center",justifyContent:"center"},Wt=function(e){if(e.password!==e.confirm)return{confirmPassword:"Passwords mismatch"}},Mt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={redirect:!1},r.handleSubmit=r.handleSubmit.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"handleSubmit",value:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.register(t);case 2:e.sent&&this.setState({redirect:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:this.state.redirect?Object(r.jsx)(p.a,{to:{pathname:"/login"}}):Object(r.jsxs)(ot.a,{style:Ht,children:[Object(r.jsx)(gt.a,{variant:"h4",component:"h2",children:"Register"}),Object(r.jsx)(qt.b,{component:Gt,onSubmit:this.handleSubmit,validate:Wt})]})})}}]),n}(c.a.Component),Bt=Object(u.b)(null,(function(e){return Object(h.bindActionCreators)({register:xe},e)}))(Mt),zt={marginTop:"5px",marginRight:"5px"},Qt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).addHobby=r.addHobby.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"addHobby",value:function(e,t){this.props.addHobby(e.hobby),setTimeout((function(){return t.restart()}),0)}},{key:"deleteHobby",value:function(e){this.props.deleteHobby(e)}},{key:"render",value:function(){var e=this,t=this.props.hobbies,n=function(e){return t.find((function(t){return t.name===e}))?"Already added":null},a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){return t||n(e)}),void 0)}};return Object(r.jsxs)("div",{children:[t.map((function(t){return Object(r.jsx)(Xe.a,{label:t.name,onDelete:function(){return e.deleteHobby(t.id)},style:zt},"hobby_"+t.id)})),Object(r.jsx)(qt.b,{onSubmit:this.addHobby,children:function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,style:{marginTop:"10px"},children:[Object(r.jsx)(qt.a,{name:"hobby",validate:a(n,Ke),type:"text",children:function(e){var t=e.input,n=e.meta;return Object(r.jsx)(Ye,{input:t,meta:n,label:"Hobby"})}}),Object(r.jsx)(st.a,{style:{marginTop:"15px"},variant:"contained",color:"primary",type:"submit",size:"large",children:"Submit"})]})}})]})}}]),n}(c.a.Component),Yt=Object(u.b)(null,(function(e){return Object(h.bindActionCreators)({addHobby:ye,deleteHobby:De},e)}))(Qt),Jt=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.userData,t=e.friendRequests.map((function(t){return t.from_user===e.user.id?t.to_user:t.from_user}));this.props.getFriendRequestUsers(t)}},{key:"render",value:function(){var e=this.props.userData,t=e.friendRequestUsers,n=e.friendRequests,a=e.user,c=t;if(!this.props.showDeclined){var s=n.filter((function(e){return e.status!==V})).map((function(e){return e.from_user===a.id?e.to_user:e.from_user}));c=c.filter((function(e){return s.find((function(t){return t===e.id}))}))}return Object(r.jsx)(Ge.a,{item:!0,container:!0,spacing:2,justify:"space-between",direction:"row",children:c.map((function(e){return Object(r.jsx)(Ge.a,{item:!0,xs:6,children:Object(r.jsx)(_t,{user:e})},"friend_request_user_"+e.id)}))})}}]),n}(c.a.Component),Kt=Object(u.b)((function(e){return{userData:e.userData}}),(function(e){return Object(h.bindActionCreators)({getFriendRequestUsers:qe},e)}))(Jt),Xt=n(197),Vt=n(202),Zt={padding:"20px",height:"100%",marginTop:"10px"},$t={marginTop:"40px",padding:"20px"},en=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={showDeclinedFriendRequests:!0},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.getUser,r=e.getFriends;n(t),r(t)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.clearUser,n=e.clearUsers;t(),n()}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.user,c=t.users,s=t.userData,i=this.state.showDeclinedFriendRequests,u=Number(n)===s.user.id,o=u?s.friends:c;return Object(r.jsxs)(Ge.a,{item:!0,container:!0,spacing:2,justify:"space-between",direction:"row",children:[Object(r.jsx)(Ge.a,{item:!0,xs:6,children:Object(r.jsxs)(ot.a,{style:Zt,children:[Object(r.jsx)(gt.a,{variant:"h5",component:"h2",children:"Common info"}),a&&a.id&&Object(r.jsx)(kt,{user:a})]})}),Object(r.jsx)(Ge.a,{item:!0,xs:6,children:Object(r.jsxs)(ot.a,{style:Zt,children:[Object(r.jsx)(gt.a,{variant:"h5",component:"h2",children:"Hobbies"}),u?Object(r.jsx)(Yt,{hobbies:s.user.hobbies}):Object(r.jsx)(Ze,{hobbies:a?a.hobbies:[]})]})}),u&&!!s.friendRequests.length&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ge.a,{item:!0,xs:12,style:$t,children:Object(r.jsxs)(gt.a,{variant:"h5",component:"h2",style:{justifyContent:"space-between",display:"flex"},children:["Friend requests",Object(r.jsx)(Xt.a,{control:Object(r.jsx)(Vt.a,{checked:i,onChange:function(){return e.setState({showDeclinedFriendRequests:!i})},name:"showDeclined",color:"primary"}),label:"Show declined requests"})]})}),Object(r.jsx)(Ge.a,{item:!0,xs:12,children:Object(r.jsx)(Kt,{showDeclined:i})})]}),Object(r.jsx)(Ge.a,{item:!0,xs:12,style:$t,children:Object(r.jsx)(gt.a,{variant:"h5",component:"h2",children:"Friends"})}),Object(r.jsx)(Ge.a,{item:!0,xs:12,children:Object(r.jsx)(Ge.a,{item:!0,container:!0,spacing:2,justify:"space-between",direction:"row",xs:12,children:o.map((function(e){return Object(r.jsx)(Ge.a,{item:!0,xs:6,children:Object(r.jsx)(_t,{user:e})},"friend_"+e.id)}))})})]})}}]),n}(c.a.Component),tn=Object(u.b)((function(e){return{user:e.user,userData:e.userData,users:e.users}}),(function(e){return Object(h.bindActionCreators)({getUser:ge,getFriends:ke,clearUser:Ee,clearUsers:_e},e)}))(en),nn={minWidth:"100%",marginTop:"10px",marginBottom:"10px",textAlign:"center",justifyContent:"center"},rn=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return Object(r.jsx)(ot.a,{style:nn,children:Object(r.jsx)("form",{onSubmit:e,children:Object(r.jsxs)(Ge.a,{container:!0,justify:"center",spacing:1,children:[Object(r.jsx)(Ge.a,{item:!0,children:Object(r.jsx)(qt.a,{name:"first_name",type:"text",parse:function(e){return e||""},initialValue:"",children:function(e){var t=e.input,n=e.meta;return Object(r.jsx)(Ye,{input:t,meta:n,label:"First Name",placeholder:"First Name"})}})}),Object(r.jsx)(Ge.a,{item:!0,children:Object(r.jsx)(qt.a,{name:"last_name",type:"text",parse:function(e){return e||""},initialValue:"",children:function(e){var t=e.input,n=e.meta;return Object(r.jsx)(Ye,{input:t,meta:n,label:"Last Name",placeholder:"Last Name"})}})}),Object(r.jsx)(Ge.a,{item:!0,style:{marginTop:"auto",marginBottom:"auto"},children:Object(r.jsx)(st.a,{variant:"contained",color:"primary",type:"submit",size:"large",children:"Submit"})})]})})})}}]),n}(c.a.Component),an=100,cn=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={page:1,isAll:!1,lastQuery:{first_name:"",last_name:""}},r.handleSubmit=r.handleSubmit.bind(Object(rt.a)(r)),r.handlePage=r.handlePage.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers("","",1,an)}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.props.users;if(e.users.length!==r.length){var a=!1;r.length<an&&(a=!0),this.setState(Object(x.a)(Object(x.a)({},this.state),{},{isAll:a}))}}},{key:"componentWillUnmount",value:function(){this.props.clearUsers()}},{key:"handleSubmit",value:function(e){this.props.getUsers(e.first_name,e.last_name,1,an),this.setState(Object(x.a)(Object(x.a)({},this.state),{},{lastQuery:e}))}},{key:"handlePage",value:function(e){var t=this.state.lastQuery;this.props.getUsers(t.first_name,t.last_name,e,an),this.setState(Object(x.a)(Object(x.a)({},this.state),{},{page:e}))}},{key:"render",value:function(){var e=this,t=this.props.users,n=this.state,a=n.page,c=n.isAll;return Object(r.jsxs)(Pe.a,{children:[Object(r.jsx)(qt.b,{component:rn,onSubmit:this.handleSubmit}),Object(r.jsxs)(Ge.a,{item:!0,container:!0,spacing:2,justify:"space-between",direction:"row",children:[t.map((function(e){return Object(r.jsx)(Ge.a,{item:!0,xs:6,children:Object(r.jsx)(_t,{user:e})},"user_"+e.id)})),!t.length&&Object(r.jsx)(gt.a,{variant:"h5",component:"h2",style:{marginBottom:"10px"},children:"Users not found"})]}),a>1&&Object(r.jsx)(st.a,{variant:"contained",color:"primary",type:"submit",size:"large",style:{marginRight:"10px"},onClick:function(){return e.handlePage(a-1)},children:"Previous"}),!c&&Object(r.jsx)(st.a,{variant:"contained",color:"primary",type:"submit",size:"large",style:{marginRight:"10px"},onClick:function(){return e.handlePage(a+1)},children:"Next"})]})}}]),n}(c.a.Component),sn=Object(u.b)((function(e){return{users:e.users}}),(function(e){return Object(h.bindActionCreators)({getUsers:Se,clearUsers:_e},e)}))(cn),un=n(99),on=n(102),ln=n(200),bn=n(189),dn=n(199),jn=n(153),pn={backgroundColor:"#F8F8FF"},hn=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.message,a=e.currentUser.id===t.id,c=a?"right":"left";return Object(r.jsx)(jn.a,{style:a?pn:{},children:Object(r.jsxs)(Ge.a,{container:!0,children:[Object(r.jsx)(Ge.a,{item:!0,xs:12,children:Object(r.jsx)(dn.a,{align:c,children:Object(r.jsx)(j.b,{to:"/".concat(t.id),children:t.first_name})})}),Object(r.jsx)(Ge.a,{item:!0,xs:12,children:Object(r.jsx)(dn.a,{align:c,primary:n.text})}),Object(r.jsx)(Ge.a,{item:!0,xs:12,children:Object(r.jsx)(dn.a,{align:c,secondary:new Date(1e3*n.created).toDateString()})})]})})}}]),n}(c.a.Component),fn=Object(u.b)((function(e){return{currentUser:e.userData.user}}),null)(hn),On={minWidth:"100%",marginTop:10,marginBottom:10},mn=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.form,a=e.submitting,c=e.pristine;return Object(r.jsx)("form",{onSubmit:function(){var e=Object(v.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:n.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:On,children:Object(r.jsxs)(Ge.a,{container:!0,component:on.a,children:[Object(r.jsx)(Ge.a,{item:!0,xs:10,children:Object(r.jsx)(qt.a,{name:"text",children:function(e){var t=e.input,n=e.meta;return Object(r.jsx)(Ye,{input:t,meta:n,style:{minWidth:"90%"},label:"Message"})}})}),Object(r.jsx)(Ge.a,{item:!0,xs:2,style:{marginTop:"auto",marginBottom:"auto"},children:Object(r.jsx)(st.a,{variant:"contained",color:"primary",type:"submit",size:"large",disabled:a||c,children:"Send"})})]})})}}]),n}(c.a.Component),vn={width:"100%",height:"70vh",marginTop:10,minWidth:650,overflowY:"auto"},xn=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={page:1,isAll:!1},r.handleSubmit=r.handleSubmit.bind(Object(rt.a)(r)),r.scrollToBottom=r.scrollToBottom.bind(Object(rt.a)(r)),r.handleOlder=r.handleOlder.bind(Object(rt.a)(r)),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.getMessages,r=t.getChatUser,a=t.chatUserId;t.chat;r(a),n(a,0,1,10),this.interval=setInterval((function(){var t=e.props.chat.messages,r=t[t.length-1];r&&n(a,r.created,1,10)}),2e3)}},{key:"componentDidUpdate",value:function(e,t,n){var r=e.chat.messages,a=this.props.chat.messages;r[r.length-1]!==a[a.length-1]&&this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.clearChatUser,n=e.clearMessages;t(),n(),clearInterval(this.interval)}},{key:"scrollToBottom",value:function(){un.animateScroll.scrollToBottom({containerId:"scroll-end",duration:0})}},{key:"handleSubmit",value:function(e){var t=this.props;(0,t.sendMessage)(t.chatUserId,e.text)}},{key:"handleOlder",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.getMessages,a=n.chatUserId,e.next=3,r(a,0,t,10);case 3:c=e.sent,this.setState(Object(x.a)(Object(x.a)({},this.state),{},{page:t,isAll:!c}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.chat,a=t.currentUser,c=this.state,s=c.page,i=c.isAll,u=[n.user,a],o=n.user.id&&a.id;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ge.a,{container:!0,component:on.a,style:vn,id:"scroll-end",children:Object(r.jsxs)(Ge.a,{item:!0,xs:12,children:[Object(r.jsxs)(bn.a,{children:[!i&&Object(r.jsx)(st.a,{variant:"contained",color:"primary",type:"submit",size:"small",style:{marginLeft:"10px"},onClick:function(){return e.handleOlder(s+1)},children:"Older messages"}),o&&n.messages.map((function(e){return Object(r.jsx)(fn,{user:u.find((function(t){return t.id===e.author_id})),message:e},e.id)}))]}),Object(r.jsx)(ln.a,{})]})}),Object(r.jsx)(qt.b,{onSubmit:this.handleSubmit,component:mn})]})}}]),n}(c.a.Component),gn=Object(u.b)((function(e){return{chat:e.chat,currentUser:e.userData.user}}),(function(e){return Object(h.bindActionCreators)({getChatUser:Ie,clearChatUser:Fe,getMessages:Ne,clearMessages:Te,sendMessage:Le},e)}))(xn),yn=(n(151),function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.userData,r=t.getUserData,a=n.isAuthenticated,c=n.authentication,s=n.user;a&&0===s.id&&r(c.user_id),this.interval=setInterval((function(){var t=e.props.userData,n=t.isAuthenticated,a=t.authentication;n&&r(a.user_id)}),2e4)}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.props,a=r.userData,c=r.getUserData;e.userData.isAuthenticated!==a.isAuthenticated&&a.isAuthenticated&&c(a.authentication.user_id)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return Object(r.jsxs)(j.a,{children:[Object(r.jsx)(ut,{}),Object(r.jsx)(Ut,{}),Object(r.jsx)(Pe.a,{children:Object(r.jsx)(Ge.a,{children:Object(r.jsx)(Ge.a,{container:!0,justify:"center",children:Object(r.jsxs)(p.d,{children:[Object(r.jsx)(p.b,{path:"/login",children:Object(r.jsx)(et,{children:Object(r.jsx)(Lt,{})})}),Object(r.jsx)(p.b,{path:"/register",children:Object(r.jsx)(et,{children:Object(r.jsx)(Bt,{})})}),Object(r.jsx)(p.b,{path:"/chat/:id",render:function(e){var t=e.match;return Object(r.jsx)(nt,{children:Object(r.jsx)(gn,{chatUserId:t.params.id},t.params.id)})}}),Object(r.jsx)(p.b,{path:"/:id",render:function(e){var t=e.match;return Object(r.jsx)(tn,{id:t.params.id},t.params.id)}}),Object(r.jsx)(p.b,{path:"/",children:Object(r.jsx)(sn,{})})]})})})})]})}}]),n}(c.a.Component)),Dn=Object(u.b)((function(e){return{userData:e.userData}}),(function(e){return Object(h.bindActionCreators)({getUserData:ve},e)}))(yn);i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(u.a,{store:oe,children:Object(r.jsx)(Dn,{})})}),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.224f4604.chunk.js.map