{"version":3,"sources":["app/actions.js","app/utils.js","app/store.js","app/actionCreators.js","components/common/fields.js","components/common/validators.js","components/common/components/Hobbies.jsx","components/common/components/AuthRedirect.jsx","components/common/components/NotAuthRedirect.jsx","components/common/components/Header.jsx","components/common/components/statuses/Friend.jsx","components/common/components/statuses/Unknown.jsx","components/common/components/statuses/WaitingYou.jsx","components/common/components/statuses/WaitingUser.jsx","components/common/components/UserStatus.jsx","components/common/components/statuses/You.jsx","components/common/components/UserInfo.jsx","components/common/components/UserCard.jsx","components/common/components/Loader.jsx","components/common/components/Notification.jsx","components/pages/login/Form.jsx","components/pages/login/LoginPage.jsx","components/pages/register/Form.jsx","components/pages/register/RegisterPage.jsx","components/pages/user/EditableHobbies.jsx","components/pages/user/FriendRequests.jsx","components/pages/user/UserPage.jsx","components/pages/users/Form.jsx","components/pages/users/UsersPage.jsx","components/pages/chat/Message.jsx","components/pages/chat/Form.jsx","components/pages/chat/ChatPage.jsx","App.js","index.js"],"names":["SHOW_MESSAGE","HIDE_MESSAGE","SHOW_LOADER","HIDE_LOADER","LOGIN_SUCCESS","LOGIN_FAILED","GET_USER_DATA","REGISTER_SUCCESS","REGISTER_FAILED","LOGOUT","GET_USER_SUCCESS","ADD_HOBBY_SUCCESS","DELETE_HOBBY_SUCCESS","GET_USERS","CLEAR_USERS","CLEAR_USER","DELETE_FRIENDSHIP","ADD_FRIEND_REQUEST","DELETE_FRIEND_REQUEST","ACCEPT_FRIEND_REQUEST","DECLINE_FRIEND_REQUEST","GET_FRIEND_REQUEST_USERS","GET_MESSAGES","CLEAR_MESSAGES","GET_CHAT_USER","CLEAR_CHAT_USER","TOKEN_FIELD_NAME","REQUEST_STATUSES","parsePayloadError","response","errors","data","detail","forEach","item","name","loc","length","msg","loadTokenFromStorage","token","localStorage","getItem","parsedToken","JSON","parse","expired_at","Date","getTime","arrayToQueryString","arr","encodedName","encodeURIComponent","map","join","toQueryString","obj","Object","keys","key","prepareMessages","oldMessages","newMessages","alreadyAddedIds","m","id","messages","Array","from","includes","push","sort","a","b","created","INITIAL_TOKEN","value","user_id","INITIAL_USER","first_name","last_name","age","gender","city","hobbies","initialState","userData","isAuthenticated","authentication","user","friends","friendRequests","friendRequestUsers","chat","users","requestCount","message","registerErrors","email","password","general","loginErrors","error","store","createStore","state","action","payload","type","filter","h","req","requestId","friend","requestsWithoutChanges","changedRequest","find","status","composeWithDevTools","applyMiddleware","thunk","API_BASE","AXIOS_CONFIG","timeout","headers","axios","axiosBase","create","getAuthorizedAxios","getState","config","showMessage","dispatch","setTimeout","messageTimeout","showLoader","hideLoader","login","isSuccess","post","setItem","stringify","console","log","logout","removeItem","getUserData","userPromise","get","friendsPromise","friendRequestsPromise","Promise","all","register","getUser","userId","addHobby","createResponse","put","deleteHobby","delete","getFriends","clearUser","clearUsers","getUsers","page","paginate_by","query","deleteFriendship","addFriendRequest","deleteFriendRequest","acceptFriendRequest","friend_id","userResponse","declineFriendRequest","getFriendRequestUsers","ids","clearChatUser","clearMessages","getChatUser","getMessages","afterTimestamp","pageLimit","to_user_id","after_timestamp","sendMessage","text","SimpleField","input","onChange","restInput","meta","submitError","style","rest","s","TextField","helperText","touched","undefined","inputProps","margin","minWidth","variant","SimpleSelect","label","options","FormControl","InputLabel","Select","labelId","option","MenuItem","required","chipStyle","marginTop","marginRight","Hobbies","this","props","Math","random","toString","substring","hobby","Chip","React","Component","AuthRedirect","redirect","Fragment","to","pathname","children","connect","NotAuthRedirect","authenticated","Header","toPath","bind","path","history","AppBar","position","Toolbar","Button","color","onClick","bindActionCreators","withRouter","Friend","handleDelete","onDelete","Unknown","handleAdd","WaitingYou","handleAccept","handleDecline","getFriendRequest","to_user","from_user","friendRequest","WaitingUser","statusComponents","YOU","FRIEND","WAITING_YOU_RESPONSE","WAITING_USER_RESPONSE","UNKNOWN","UserStatus","current","StatusComponent","getComponent","typographyStyle","display","justifyContent","UserInfo","Typography","component","padding","height","UserCard","Card","Loader","CircularProgress","Notification","Snackbar","open","anchorOrigin","vertical","horizontal","severity","LoginForm","handleSubmit","onSubmit","validate","size","minHeight","textAlign","LoginPage","form","RegisterForm","genderOptions","placeholder","validateForm","values","confirm","confirmPassword","RegisterPage","setState","EditableHobbies","restart","alreadyAdded","composeValidators","validators","reduce","validator","FriendRequests","showDeclined","declinedIds","Grid","container","spacing","justify","direction","xs","cardStyle","gridStyle","UserPage","showDeclinedFriendRequests","isMyPage","Number","FormControlLabel","control","Checkbox","checked","marginBottom","SearchForm","initialValue","PAGE_LIMIT","UsersPage","isAll","lastQuery","handlePage","prevProps","prevState","snapshot","pageNum","Container","myMessage","backgroundColor","Message","isMyMessage","currentUser","align","ListItem","ListItemText","primary","secondary","toDateString","MessageForm","submitting","pristine","event","reset","Paper","disabled","chatStyle","width","overflowY","ChatPage","scrollToBottom","handleOlder","chatUserId","interval","setInterval","lastMessage","prevMessages","clearInterval","animateScroll","containerId","duration","isNotEmpty","isReady","List","marginLeft","u","author_id","Divider","App","render","match","params","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.224f4604.chunk.js","sourcesContent":["export const SHOW_MESSAGE = 'SHOW_MESSAGE';\nexport const HIDE_MESSAGE = 'HIDE_MESSAGE';\n\nexport const SHOW_LOADER = 'SHOW_LOADER';\nexport const HIDE_LOADER = 'HIDE_LOADER';\n\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILED = 'LOGIN_FAILED';\n\nexport const GET_USER_DATA = 'GET_USER_DATA';\n\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAILED = 'REGISTER_FAILED';\n\nexport const LOGOUT = 'LOGOUT';\n\nexport const GET_USER_SUCCESS = 'GET_USER_SUCCESS';\n\nexport const ADD_HOBBY_SUCCESS = 'ADD_HOBBY';\nexport const DELETE_HOBBY_SUCCESS = 'DELETE_HOBBY';\n\n\nexport const GET_USERS = 'GET_USERS';\nexport const CLEAR_USERS = 'CLEAR_USERS';\nexport const CLEAR_USER = 'CLEAR_USER';\n\nexport const DELETE_FRIENDSHIP = 'DELETE_FRIENDSHIP';\nexport const ADD_FRIEND_REQUEST = 'ADD_FRIEND_REQUEST';\nexport const DELETE_FRIEND_REQUEST = 'DELETE_FRIEND_REQUEST';\nexport const ACCEPT_FRIEND_REQUEST = 'ACCEPT_FRIEND_REQUEST';\nexport const DECLINE_FRIEND_REQUEST = 'DECLINE_FRIEND_REQUEST';\n\nexport const GET_FRIEND_REQUEST_USERS = 'GET_FRIEND_REQUEST_USERS';\n\nexport const GET_MESSAGES = 'GET_MESSAGES';\nexport const CLEAR_MESSAGES = 'CLEAR_MESSAGES';\n\nexport const GET_CHAT_USER = 'GET_CHAT_USER';\nexport const CLEAR_CHAT_USER = 'CLEAR_CHAT_USER';\n","const TOKEN_FIELD_NAME = 'ACCESS_TOKEN';\nexport const REQUEST_STATUSES = {\n  WAITING: 'WAITING',\n  DECLINED: 'DECLINED',\n}\n\n// TODO: ADD PAGINATE LATER\n\nexport const parsePayloadError = response => {\n  const errors = {};\n  response.data.detail.forEach(item => {\n    const name = item.loc[item.loc.length - 1];\n    errors[name] = item.msg;\n  });\n  return errors;\n}\n\n\nexport const storeTokenIntoStorage = token => {\n  localStorage.setItem(TOKEN_FIELD_NAME, JSON.stringify(token));\n}\n\nexport const loadTokenFromStorage = () => {\n  const token = localStorage.getItem(TOKEN_FIELD_NAME);\n  if (!token) {\n    return null;\n  }\n  const parsedToken = JSON.parse(token);\n  if (parsedToken.expired_at < new Date().getTime() / 1000) {\n    return null;\n  }\n  return parsedToken;\n};\n\nexport const deleteTokenFromStorage = () => {\n  localStorage.removeItem(TOKEN_FIELD_NAME);\n}\n\n\nexport const arrayToQueryString = (name, arr) => {\n  const encodedName = encodeURIComponent(name);\n  const str = arr.map(item => `${encodedName}=${encodeURIComponent(item)}`);\n  return str.join(\"&\");\n}\n\nexport const toQueryString = obj => {\n  const str = Object.keys(obj).map(key => {\n    return encodeURIComponent(key) + \"=\" + encodeURIComponent(obj[key])\n  })\n\n  return str.join(\"&\");\n}\n\n\nexport const prepareMessages = (oldMessages, newMessages) => {\n  const alreadyAddedIds = oldMessages.map(m => m.id);\n  const messages = Array.from(oldMessages);\n  newMessages.forEach(m => {\n    if (alreadyAddedIds.includes(m.id)) {\n      return\n    }\n    alreadyAddedIds.push(m.id);\n    messages.push(m);\n  })\n  return messages.sort((a, b) => {return a.created < b.created ? -1 : 1})\n}\n","import {createStore, applyMiddleware} from 'redux';\nimport thunk from 'redux-thunk';\nimport {composeWithDevTools} from 'redux-devtools-extension';\n\nimport {loadTokenFromStorage, prepareMessages, REQUEST_STATUSES} from './utils';\n\nimport {\n  LOGIN_SUCCESS,\n  LOGIN_FAILED,\n  SHOW_LOADER,\n  HIDE_LOADER,\n  SHOW_MESSAGE,\n  HIDE_MESSAGE,\n  REGISTER_SUCCESS,\n  REGISTER_FAILED,\n  GET_USER_SUCCESS,\n  ADD_HOBBY_SUCCESS,\n  DELETE_HOBBY_SUCCESS,\n  LOGOUT,\n  GET_USERS,\n  CLEAR_USERS,\n  CLEAR_USER,\n  DELETE_FRIENDSHIP,\n  ADD_FRIEND_REQUEST,\n  DELETE_FRIEND_REQUEST,\n  ACCEPT_FRIEND_REQUEST,\n  DECLINE_FRIEND_REQUEST,\n  GET_USER_DATA,\n  GET_FRIEND_REQUEST_USERS,\n  GET_CHAT_USER,\n  CLEAR_CHAT_USER,\n  GET_MESSAGES,\n  CLEAR_MESSAGES\n} from './actions';\n\n\nconst INITIAL_TOKEN = {\n  id: 0,\n  value: '',\n  user_id: 0,\n  expired_at: '',\n}\n\nconst INITIAL_USER = {\n  id: 0,\n  first_name: '',\n  last_name: '',\n  age: 0,\n  gender: null,\n  city: '',\n  hobbies: []\n}\n\nconst initialState = {\n  userData: {\n    isAuthenticated: !!loadTokenFromStorage(),\n    authentication: loadTokenFromStorage() || INITIAL_TOKEN,\n    user: INITIAL_USER,\n    friends: [],\n    friendRequests: [],\n    friendRequestUsers: [],\n  },\n  chat: {\n    user: INITIAL_USER,\n    messages: []\n  },\n  user: INITIAL_USER,\n  users: [],\n  requestCount: 0,\n  message: '',\n  registerErrors: {\n    email: null,\n    first_name: null,\n    last_name: null,\n    password: null,\n    city: null,\n    age: null,\n    gender: null,\n    general: null,\n  },\n  loginErrors: {\n    email: null,\n    password: null,\n  },\n  error: ''\n}\nexport const store = createStore(\n  reducer,\n  initialState,\n  composeWithDevTools(\n    applyMiddleware(thunk)\n  )\n);\n\nexport default function reducer(state = initialState, action) {\n  const payload = action.payload;\n\n  switch (action.type) {\n    case SHOW_MESSAGE: {\n      return {...state, message: payload}\n    }\n    case HIDE_MESSAGE: {\n      return {...state, message: ''}\n    }\n    case SHOW_LOADER: {\n      return {...state, requestCount: state.requestCount + 1}\n    }\n    case HIDE_LOADER: {\n      return {...state, requestCount: state.requestCount - 1}\n    }\n    case REGISTER_SUCCESS: {\n      return {...state, registerErrors: {}}\n    }\n    case REGISTER_FAILED: {\n      return {...state, registerErrors: payload}\n    }\n    case LOGIN_SUCCESS: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          authentication: payload,\n          isAuthenticated: true,\n        },\n        loginErrors: {}\n      }\n    }\n    case LOGIN_FAILED: {\n      return {...state, loginErrors: payload}\n    }\n    case LOGOUT: {\n      return {\n        ...state,\n        userData: {\n          user: INITIAL_USER,\n          friends: [],\n          friendRequests: [],\n          friendRequestUsers: [],\n          authentication: INITIAL_TOKEN,\n          isAuthenticated: false,\n        },\n      }\n    }\n    case GET_USER_DATA: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          user: payload.user,\n          friends: payload.friends,\n          friendRequests: payload.friendRequests\n        },\n      }\n    }\n    case GET_USER_SUCCESS: {\n      return {...state, user: payload}\n    }\n    case CLEAR_USER: {\n      return {...state, user: INITIAL_USER}\n    }\n    case ADD_HOBBY_SUCCESS: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          user: {\n            ...state.userData.user,\n            hobbies: [...state.userData.user.hobbies, payload]\n          }\n        }\n      }\n    }\n    case DELETE_HOBBY_SUCCESS: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          user: {\n            ...state.userData.user,\n            hobbies: state.userData.user.hobbies.filter(h => h.id !== payload)\n          }\n        }\n      }\n    }\n    case GET_USERS: {\n      return {...state, users: payload}\n    }\n    case CLEAR_USERS: {\n      return {...state, users: []}\n    }\n\n    case DELETE_FRIENDSHIP: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friends: state.userData.friends.filter(user => user.id !== payload)\n        }\n      }\n    }\n\n    case ADD_FRIEND_REQUEST: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequests: [...state.userData.friendRequests, payload]\n        }\n      }\n    }\n\n    case DELETE_FRIEND_REQUEST: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequests: state.userData.friendRequests.filter(req => req.id !== payload)\n        }\n      }\n    }\n\n    case ACCEPT_FRIEND_REQUEST: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequests: state.userData.friendRequests.filter(req => req.id !== payload.requestId),\n          friends: [...state.userData.friends, payload.friend]\n        }\n      }\n    }\n\n    case DECLINE_FRIEND_REQUEST: {\n      const friendRequests = state.userData.friendRequests;\n      const requestsWithoutChanges = friendRequests.filter(req => req.id !== payload);\n      const changedRequest = friendRequests.find(req => req.id === payload);\n      changedRequest.status = REQUEST_STATUSES.DECLINED;\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequests: [...requestsWithoutChanges, changedRequest],\n        }\n      }\n    }\n    case GET_FRIEND_REQUEST_USERS: {\n      return {\n        ...state,\n        userData: {\n          ...state.userData,\n          friendRequestUsers: payload,\n        }\n      }\n    }\n\n    case GET_CHAT_USER: {\n      return {\n        ...state,\n        chat: {\n          ...state.chat,\n          user: payload\n        }\n      }\n    }\n\n    case CLEAR_CHAT_USER: {\n      return {\n        ...state,\n        chat: {\n          ...state.chat,\n          user: INITIAL_USER\n        }\n      }\n    }\n\n    case GET_MESSAGES: {\n      return {\n        ...state,\n        chat: {\n          ...state.chat,\n          // todo: filter, sort, etc\n          messages: prepareMessages(state.chat.messages, payload)\n        }\n      }\n    }\n\n    case CLEAR_MESSAGES: {\n      return {\n        ...state,\n        chat: {\n          ...state.chat,\n          messages: []\n        }\n      }\n    }\n\n    default:\n      return state\n  }\n}\n","import {default as axiosBase} from 'axios';\nimport {\n  LOGIN_SUCCESS,\n  LOGIN_FAILED,\n  SHOW_LOADER,\n  SHOW_MESSAGE,\n  HIDE_LOADER,\n  HIDE_MESSAGE,\n  REGISTER_FAILED,\n  REGISTER_SUCCESS,\n  GET_USER_SUCCESS,\n  ADD_HOBBY_SUCCESS,\n  DELETE_HOBBY_SUCCESS,\n  LOGOUT,\n  GET_USERS,\n  CLEAR_USER,\n  CLEAR_USERS,\n  DELETE_FRIENDSHIP,\n  ADD_FRIEND_REQUEST,\n  DELETE_FRIEND_REQUEST,\n  ACCEPT_FRIEND_REQUEST,\n  DECLINE_FRIEND_REQUEST,\n  GET_USER_DATA,\n  GET_FRIEND_REQUEST_USERS, CLEAR_CHAT_USER, CLEAR_MESSAGES, GET_CHAT_USER, GET_MESSAGES\n} from \"./actions\";\nimport {\n  deleteTokenFromStorage,\n  storeTokenIntoStorage,\n  parsePayloadError,\n  toQueryString,\n  arrayToQueryString\n} from \"./utils\";\nimport {store} from './store';\n\nexport const API_BASE = '/api/v1';\n\nconst AXIOS_CONFIG = {\n  timeout: 20000,\n  headers: {\n    \"X-Requested-With\": \"XMLHttpRequest\",\n    \"Content-Type\": \"application/json\",\n  },\n}\n\nconst axios = axiosBase.create(AXIOS_CONFIG);\n\nconst getAuthorizedAxios = () => {\n  const state = store.getState();\n  const config = {\n    ...AXIOS_CONFIG,\n    headers: {\n      ...AXIOS_CONFIG.headers,\n      \"X-Auth-Token\": state.userData.authentication && state.userData.authentication.value\n    }\n  }\n  return axiosBase.create(config)\n}\n\nconst messageTimeout = 3;\n\n\nexport const showMessage = message => {\n  return dispatch => {\n    dispatch({type: SHOW_MESSAGE, payload: message});\n    setTimeout(() => dispatch({type: HIDE_MESSAGE}), messageTimeout * 1000);\n  }\n}\n\nexport const showLoader = () => {\n  return dispatch => {\n    dispatch({type: SHOW_LOADER});\n  }\n}\n\nexport const hideLoader = () => {\n  return dispatch => {\n    dispatch({type: HIDE_LOADER});\n  }\n}\n\nexport const login = (email, password) => {\n  return async dispatch => {\n    dispatch(showLoader());\n    let isSuccess = false;\n    try {\n      const response = await axios.post(`${API_BASE}/auth/login`, {email, password});\n      isSuccess = true;\n      storeTokenIntoStorage(response.data);\n      dispatch({type: LOGIN_SUCCESS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      switch (e.response.status) {\n        case 422: {\n          dispatch({\n            type: LOGIN_FAILED,\n            payload: parsePayloadError(e.response)\n          });\n          break;\n        }\n        case 400: {\n          dispatch({\n            type: LOGIN_FAILED,\n            payload: {email: e.response.data.detail}\n          });\n          break;\n        }\n        default: {\n          dispatch({\n            type: LOGIN_FAILED,\n            payload: {general: \"Unexpected error\"}\n          });\n        }\n      }\n      dispatch(showMessage(\"Login failed\"));\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\nexport const logout = () => {\n  return dispatch => {\n    deleteTokenFromStorage();\n    dispatch({type: LOGOUT})\n  }\n}\n\nexport const getUserData = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    try {\n      const userPromise = axios.get(`${API_BASE}/users/${id}/`);\n      const friendsPromise = axios.get(`${API_BASE}/users/?friends_of=${id}`);\n      const friendRequestsPromise = axios.get(`${API_BASE}/friendships/`);\n      const [user, friends, friendRequests] = await Promise.all(\n        [userPromise, friendsPromise, friendRequestsPromise]\n      );\n      dispatch({\n        type: GET_USER_DATA, payload: {\n          user: user.data,\n          friends: friends.data || [],\n          friendRequests: friendRequests.data || []\n        }\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage(\"Auth data failed. Please reload page.\"));\n    }\n  }\n}\n\n\nexport const register = (\n  {\n    email,\n    password,\n    first_name,\n    last_name,\n    age,\n    gender,\n    city\n  }\n) => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const payload = {email, password, first_name, last_name, age, gender, city};\n    let isSuccess = false;\n    try {\n      await axios.post(`${API_BASE}/auth/register`, payload);\n      isSuccess = true;\n      dispatch(showMessage(\"Success!\"));\n      dispatch({type: REGISTER_SUCCESS});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage(\"Registration failed\"));\n      switch (e.response.status) {\n        case 422: {\n          dispatch({\n            type: REGISTER_FAILED,\n            payload: parsePayloadError(e.response)\n          });\n          break;\n        }\n        case 400: {\n          dispatch({\n            type: REGISTER_FAILED,\n            payload: {email: e.response.data.detail}\n          });\n          break;\n        }\n        default: {\n          dispatch({\n            type: REGISTER_FAILED,\n            payload: {general: \"Unexpected error\"}\n          });\n        }\n      }\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\n\nexport const getUser = userId => {\n  return async dispatch => {\n    let isSuccess = false;\n    dispatch(showLoader());\n    try {\n      const response = await axios.get(`${API_BASE}/users/${userId}/`);\n      isSuccess = true;\n      dispatch({type: GET_USER_SUCCESS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get user failed'))\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\n\nexport const addHobby = name => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const axios = getAuthorizedAxios();\n    try {\n      const createResponse = await axios.post(`${API_BASE}/hobbies/`, {name});\n      await axios.put(`${API_BASE}/users/hobbies/${createResponse.data.id}/`);\n      dispatch({type: ADD_HOBBY_SUCCESS, payload: createResponse.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Add hobby failed'))\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const deleteHobby = id => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const axios = getAuthorizedAxios();\n    try {\n      await axios.delete(`${API_BASE}/users/hobbies/${id}/`);\n      dispatch({type: DELETE_HOBBY_SUCCESS, payload: id});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Delete hobby failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const getFriends = id => {\n  return async dispatch => {\n    dispatch(showLoader());\n    try {\n      const response = await axios.get(`${API_BASE}/users/?friends_of=${id}`,);\n      dispatch({type: GET_USERS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get friends failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const clearUser = () => {\n  return dispatch => {\n    dispatch({type: CLEAR_USER});\n  }\n}\n\nexport const clearUsers = () => {\n  return dispatch => {\n    dispatch({type: CLEAR_USERS});\n  }\n}\n\nexport const getUsers = (first_name, last_name, page = 1, paginate_by = 100) => {\n  return async dispatch => {\n    dispatch(showLoader());\n    const query = toQueryString({first_name, last_name, page, paginate_by});\n    try {\n      const response = await axios.get(`${API_BASE}/users/?${query}`,);\n      dispatch({type: GET_USERS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get users failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const deleteFriendship = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      await axios.delete(`${API_BASE}/friendships/friendship/${id}/`,);\n      dispatch({type: DELETE_FRIENDSHIP, payload: id});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Friendship deleting failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const addFriendRequest = userId => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      const response = await axios.post(`${API_BASE}/friendships/${userId}/`);\n      dispatch({type: ADD_FRIEND_REQUEST, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Add friend failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const deleteFriendRequest = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      await axios.delete(`${API_BASE}/friendships/${id}/`);\n      dispatch({type: DELETE_FRIEND_REQUEST, payload: id});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Friend request deleting failed'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\nexport const acceptFriendRequest = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      const response = await axios.put(`${API_BASE}/friendships/accept/${id}/`);\n      const userResponse = await axios.get(`${API_BASE}/users/${response.data.friend_id}/`);\n      dispatch({type: ACCEPT_FRIEND_REQUEST, payload: {requestId: id, friend: userResponse.data}});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Friend request accepting failed.'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\n\nexport const declineFriendRequest = id => {\n  return async dispatch => {\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      await axios.put(`${API_BASE}/friendships/decline/${id}/`);\n      dispatch({type: DECLINE_FRIEND_REQUEST, payload: id});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Friend request declining failed.'));\n    }\n    dispatch(hideLoader());\n  }\n}\n\n\nexport const getFriendRequestUsers = ids => {\n  return async dispatch => {\n    dispatch(showLoader());\n    try {\n      const response = await axios.get(`${API_BASE}/users/?${arrayToQueryString('ids', ids)}`);\n      dispatch({type: GET_FRIEND_REQUEST_USERS, payload: response.data});\n    } catch (e) {\n      console.log(e);\n    }\n    dispatch(hideLoader());\n  }\n}\n\n\nexport const clearChatUser = () => {\n  return dispatch => dispatch({type: CLEAR_CHAT_USER});\n}\n\nexport const clearMessages = () => {\n  return dispatch => dispatch({type: CLEAR_MESSAGES});\n}\n\n\nexport const getChatUser = userId => {\n  return async dispatch => {\n    let isSuccess = false;\n    dispatch(showLoader());\n    try {\n      const response = await axios.get(`${API_BASE}/users/${userId}/`);\n      isSuccess = true;\n      dispatch({type: GET_CHAT_USER, payload: response.data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get user failed'))\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n\nexport const getMessages = (userId, afterTimestamp = 0, page = 1, pageLimit = 100) => {\n  return async dispatch => {\n    let data = [];\n    const payload = {\n      to_user_id: userId,\n      after_timestamp: afterTimestamp,\n      page: page,\n      paginate_by: pageLimit\n    }\n    const query = toQueryString(payload);\n    const axios = getAuthorizedAxios();\n    try {\n      const response = await axios.get(`${API_BASE}/messages/?${query}`);\n      data = response.data;\n      dispatch({type: GET_MESSAGES, payload: data});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Get messages failed'))\n    }\n    return data.length > 0;\n  }\n}\n\nexport const sendMessage = (userId, text) => {\n  return async dispatch => {\n    let isSuccess = false;\n    const axios = getAuthorizedAxios();\n    dispatch(showLoader());\n    try {\n      const response = await axios.post(`${API_BASE}/messages/`, {to_user_id: userId, text});\n      isSuccess = true;\n      dispatch({type: GET_MESSAGES, payload: [response.data]});\n    } catch (e) {\n      console.log(e);\n      dispatch(showMessage('Send message failed'))\n    }\n    dispatch(hideLoader());\n    return isSuccess;\n  }\n}\n","import {TextField, FormControl, InputLabel, Select, MenuItem} from \"@material-ui/core\";\n\n\nexport function SimpleField(\n  {\n    input: {name, onChange, value, ...restInput},\n    meta, submitError, style, ...rest\n  }) {\n  const s = style ? style : {};\n  return <TextField\n    {...rest}\n    name={name}\n    helperText={meta.touched ? meta.error || submitError : undefined}\n    error={(meta.error || submitError) && meta.touched}\n    inputProps={restInput}\n    onChange={onChange}\n    value={value}\n    style={{margin: 10, minWidth: '60%', ...s}}\n    id=\"outlined-basic\"\n    variant=\"outlined\"\n  />\n}\n\n\nexport function SimpleSelect(\n  {\n    input: {name, onChange, value, ...restInput},\n    meta, submitError, label, options, ...rest\n  }) {\n  return <FormControl variant=\"outlined\" style={{margin: 10, minWidth: '60%'}}>\n    <InputLabel id=\"demo-simple-select-outlined-label\">{label}</InputLabel>\n    <Select\n      {...rest}\n      name={name}\n      helperText={meta.touched ? meta.error || submitError : undefined}\n      error={(meta.error || submitError) && meta.touched}\n      inputProps={restInput}\n      labelId=\"demo-simple-select-outlined-label\"\n      id=\"demo-simple-select-outlined\"\n      value={value}\n      onChange={onChange}\n      label={label}\n    >\n      {Object.keys(options).map(option =>\n        <MenuItem key={\"select\" + option} value={option}>\n          {options[option]}\n        </MenuItem>)}\n    </Select>\n  </FormControl>\n\n}\n","export const required = value => (value ? undefined : 'Required');\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport {Chip} from \"@material-ui/core\";\n\nconst chipStyle = {\n  marginTop: '3px',\n  marginRight: '5px',\n}\n\nexport default class Hobbies extends React.Component {\n\n  render() {\n    const {hobbies} = this.props;\n    const key = Math.random().toString(36).substring(7);\n    return (\n      <>\n        {hobbies.map(hobby =>\n          <Chip key={key + hobby.id} label={hobby.name} style={chipStyle}/>\n        )}\n      </>\n    );\n  }\n}\n\nHobbies.propTypes = {\n  hobbies: PropTypes.array.isRequired,\n}\n\n\n\n","import React from 'react';\nimport {Redirect} from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\n\nclass AuthRedirect extends React.Component {\n\n\n  render() {\n    const {userData} = this.props;\n    const redirect = userData && userData.isAuthenticated;\n    return (\n      <React.Fragment>\n        {redirect ? <Redirect to={{pathname: `/${userData.authentication.user_id}`}}/> :\n          this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n\n\nAuthRedirect.propTypes = {\n  userData: PropTypes.object.isRequired,\n}\n\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n});\n\n\nexport default connect(mapStateToProps, null)(AuthRedirect);\n","import React from 'react';\nimport {Redirect} from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\n\nclass NotAuthRedirect extends React.Component {\n\n\n  render() {\n    const {userData} = this.props;\n    const authenticated = userData && userData.isAuthenticated;\n    return (\n      <React.Fragment>\n        {!authenticated ? <Redirect to={{pathname: '/login'}}/> :\n          this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n\n\nNotAuthRedirect.propTypes = {\n  userData: PropTypes.object.isRequired,\n}\n\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n});\n\n\nexport default connect(mapStateToProps, null)(NotAuthRedirect);\n","import React from 'react';\nimport {withRouter} from \"react-router-dom\";\nimport {AppBar, Toolbar, Button} from \"@material-ui/core\";\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {logout} from \"../../../app/actionCreators\";\nimport {Loader} from \"../index\";\n\n\nclass Header extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.toPath = this.toPath.bind(this);\n  }\n\n\n  toPath(path) {\n    this.props.history.push(path);\n  }\n\n\n  render() {\n    const {isAuthenticated, logout, user} = this.props;\n\n\n    return (\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/')}>\n            Social Network\n          </Button>\n          {isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/login')}>\n            {user.first_name} {user.last_name}\n          </Button>}\n          {isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={logout}>\n            Logout\n          </Button>}\n          {!isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/login')}>\n            Login\n          </Button>}\n          {!isAuthenticated && <Button\n            color=\"inherit\"\n            onClick={() => this.toPath('/register')}>\n            Register\n          </Button>}\n          <Loader/>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.userData.isAuthenticated,\n  user: state.userData.user\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    logout,\n  }, dispatch)\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Header));\n","import React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport {deleteFriendship} from \"../../../../app/actionCreators\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {Chip} from \"@material-ui/core\";\n\n\nclass Friend extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n\n  handleDelete() {\n    const {user, deleteFriendship} = this.props;\n    deleteFriendship(user.id);\n  }\n\n  render() {\n    return <Chip label=\"Friend\" onDelete={this.handleDelete} color=\"primary\"/>\n  }\n}\n\nFriend.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    deleteFriendship,\n  }, dispatch)\n}\n\nexport default connect(null, mapDispatchToProps)(Friend);\n","import React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport {addFriendRequest} from \"../../../../app/actionCreators\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {Chip} from \"@material-ui/core\";\n\n\nclass Unknown extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleAdd = this.handleAdd.bind(this);\n  }\n\n  handleAdd() {\n    const {user, addFriendRequest} = this.props;\n    addFriendRequest(user.id);\n  }\n\n  render() {\n    return <Chip label=\"Add Friend\" onClick={this.handleAdd}/>\n  }\n}\n\nUnknown.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    addFriendRequest,\n  }, dispatch)\n}\n\nexport default connect(null, mapDispatchToProps)(Unknown);\n","import React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport {acceptFriendRequest, declineFriendRequest} from \"../../../../app/actionCreators\";\nimport {Chip} from \"@material-ui/core\";\n\n\nclass WaitingYou extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleAccept = this.handleAccept.bind(this);\n    this.handleDecline = this.handleDecline.bind(this);\n    this.getFriendRequest = this.getFriendRequest.bind(this);\n  }\n\n  getFriendRequest() {\n    const {userData, user} = this.props;\n    return userData.friendRequests.find(req => {\n      return req.to_user === userData.user.id && req.from_user === user.id;\n    })\n  }\n\n  handleAccept(friendRequest) {\n    this.props.acceptFriendRequest(friendRequest.id);\n  }\n\n  handleDecline(friendRequest) {\n    this.props.declineFriendRequest(friendRequest.id);\n  }\n\n  render() {\n    const friendRequest = this.getFriendRequest();\n\n    return <Chip\n      label='Accept'\n      onDelete={() => this.handleDecline(friendRequest)}\n      onClick={() => this.handleAccept(friendRequest)}\n      color='secondary'\n    />\n  }\n}\n\nWaitingYou.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  userData: state.userData\n});\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    acceptFriendRequest, declineFriendRequest\n  }, dispatch)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WaitingYou);\n","import React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport {deleteFriendRequest} from \"../../../../app/actionCreators\";\nimport {REQUEST_STATUSES} from \"../../../../app/utils\";\nimport {Chip} from \"@material-ui/core\";\n\n\nclass WaitingUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.getFriendRequest = this.getFriendRequest.bind(this);\n  }\n\n  getFriendRequest() {\n    const {userData, user} = this.props;\n    return userData.friendRequests.find(req => {\n      return req.from_user === userData.user.id && req.to_user === user.id;\n    })\n  }\n\n\n  handleDelete(friendRequest) {\n    this.props.deleteFriendRequest(friendRequest.id);\n  }\n\n  render() {\n    const friendRequest = this.getFriendRequest();\n    const isWaiting = friendRequest.status === REQUEST_STATUSES.WAITING;\n    const text = isWaiting ? 'Waiting user response' : 'User decline your request';\n    return <Chip\n      label={text}\n      onDelete={() => this.handleDelete(friendRequest)}\n      color='secondary'\n    />\n  }\n}\n\nWaitingUser.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  userData: state.userData\n});\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    deleteFriendRequest\n  }, dispatch)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WaitingUser);\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\n\nimport {You, Friend, WaitingYou, WaitingUser, Unknown} from './statuses'\n\n\nconst statusComponents = {\n  YOU: You,\n  FRIEND: Friend,\n  WAITING_YOU_RESPONSE: WaitingYou,\n  WAITING_USER_RESPONSE: WaitingUser,\n  UNKNOWN: Unknown,\n}\n\n\nclass UserStatus extends React.Component {\n\n  getComponent() {\n    const {user, userData} = this.props;\n    const current = userData.user;\n\n    if (!userData.isAuthenticated) {\n      return statusComponents.UNKNOWN;\n    }\n\n    if (user.id === userData.authentication.user_id) {\n      return statusComponents.YOU;\n    }\n    if (userData.friends.find(friend => friend.id === user.id)) {\n      return statusComponents.FRIEND;\n    }\n    const friendRequestFrom = userData.friendRequests.find(req => {\n      return req.from_user === current.id && req.to_user === user.id;\n    })\n    if (friendRequestFrom) {\n      return statusComponents.WAITING_USER_RESPONSE\n    }\n    const friendRequestTo = userData.friendRequests.find(req => {\n      return req.to_user === current.id && req.from_user === user.id;\n    })\n    if (friendRequestTo) {\n      return statusComponents.WAITING_YOU_RESPONSE;\n    }\n    return statusComponents.UNKNOWN;\n  }\n\n  render() {\n    const StatusComponent = this.getComponent();\n    return <StatusComponent user={this.props.user}/>;\n  }\n}\n\nUserStatus.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n});\n\n\nexport default connect(mapStateToProps, null)(UserStatus);\n\n\n\n","import React from \"react\";\nimport {Chip} from \"@material-ui/core\";\n\nexport default class You extends React.Component{\n  render() {\n    return <Chip label=\"You\" color=\"primary\"/>\n  }\n}\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport {Link} from \"react-router-dom\";\nimport UserStatus from \"./UserStatus\";\nimport {Typography, Button} from \"@material-ui/core\";\nimport {connect} from \"react-redux\";\n\n\nconst typographyStyle = {\n  display: 'flex',\n  justifyContent: 'space-between'\n}\n\n\nclass UserInfo extends React.Component {\n\n\n  render() {\n    const {user, isAuthenticated} = this.props;\n\n    return <>\n      <Typography variant=\"h6\" component=\"h2\" style={typographyStyle}>\n        <Link to={`/${user.id}`}>{user.first_name} {user.last_name}</Link>\n        {isAuthenticated && <UserStatus user={user}/>}\n      </Typography>\n      {isAuthenticated && <Link to={`/chat/${user.id}`}>\n        <Button variant=\"contained\" color=\"primary\">Chat</Button>\n      </Link>}\n\n      <p><b>Age:</b> {user.age}</p>\n      {user.city && <p><b>City:</b> {user.city}</p>}\n      {user.gender && <p><b>Gender:</b> {user.gender}</p>}\n    </>\n  }\n}\n\nUserInfo.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.userData.isAuthenticated,\n});\n\n\nexport default connect(mapStateToProps, null)(UserInfo);\n\n\n\n\n\n\n\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport Hobbies from \"./Hobbies\";\nimport {Card} from \"@material-ui/core\";\nimport UserInfo from \"./UserInfo\";\n\nconst style = {\n  padding: '10px',\n  height: '90%'\n}\n\n\nexport default class UserCard extends React.Component {\n\n\n  render() {\n    const {user} = this.props;\n\n    return (\n      <Card style={style}>\n        <UserInfo user={user}/>\n        <Hobbies hobbies={user.hobbies}/>\n      </Card>\n    );\n  }\n}\n\nUserCard.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\n\n\n\n\n\n\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {CircularProgress} from \"@material-ui/core\";\n\n\n\nclass Loader extends React.Component {\n\n\n  render() {\n\n    return (\n      <>\n        {!!this.props.requestCount && <CircularProgress color=\"inherit\"/>}\n      </>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  requestCount: state.requestCount,\n});\n\n\nexport default connect(mapStateToProps, null)(Loader);\n","import React from 'react';\nimport {connect} from \"react-redux\";\n\nimport {Snackbar} from \"@material-ui/core\";\n\n\nclass Notification extends React.Component {\n\n\n  render() {\n    const {message} = this.props;\n\n    return <Snackbar\n      open={!!message}\n      anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n      message={message}\n      severity=\"error\"\n    />\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  message: state.message,\n});\n\n\nexport default connect(mapStateToProps, null)(Notification);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\nimport {connect} from \"react-redux\";\n\nimport {SimpleField, required} from \"../../common\";\nimport {Button} from \"@material-ui/core\";\n\n\nclass LoginForm extends React.Component {\n\n  render() {\n    const {handleSubmit, errors} = this.props;\n\n    return (\n      <form onSubmit={handleSubmit}>\n        <Field name=\"email\" validate={required} type=\"email\">\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Email\"}\n              submitError={errors.email}\n            />\n          }}\n        </Field>\n        <Field name=\"password\" type=\"password\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Password\"}\n              submitError={errors.password}\n            />\n          }}\n        </Field>\n        {errors.general && <div>{errors.general}</div>}\n        <div>\n          <Button variant=\"contained\" color=\"primary\" type=\"submit\" size=\"large\">\n            Submit\n          </Button>\n        </div>\n      </form>\n    )\n  }\n}\n\nLoginForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  errors: PropTypes.object,\n}\n\n\nconst mapStateToProps = state => ({\n  errors: state.loginErrors,\n});\n\nexport default connect(mapStateToProps, null)(LoginForm);\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {Form} from \"react-final-form\";\n\nimport {login} from \"../../../app/actionCreators\";\nimport LoginForm from \"./Form\";\nimport {Card, Typography} from \"@material-ui/core\";\n\n\nconst style = {\n  minWidth: '50%',\n  minHeight: '200px',\n  padding: '20px',\n  margin: '40px',\n  textAlign: 'center',\n  justifyContent: 'center'\n}\n\nclass LoginPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  async handleSubmit(form) {\n    await this.props.login(form.email, form.password);\n  }\n\n  render() {\n    return (\n      <Card style={style}>\n         <Typography variant=\"h4\" component=\"h2\">\n          Login\n        </Typography>\n        <Form\n          component={LoginForm}\n          onSubmit={this.handleSubmit}\n        />\n      </Card>\n    );\n  }\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    login,\n  }, dispatch)\n}\n\nexport default connect(null, mapDispatchToProps)(LoginPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\n\nimport {SimpleField, SimpleSelect, required} from \"../../common\";\nimport {connect} from \"react-redux\";\nimport {Button} from \"@material-ui/core\";\n\n\nclass RegisterForm extends React.Component {\n\n  render() {\n    const {handleSubmit, errors} = this.props;\n    const genderOptions = {\"MALE\": \"Male\", \"FEMALE\": \"Female\", \"OTHER\": \"Other\"}\n    return (\n      <form onSubmit={handleSubmit}>\n        <Field name=\"email\" validate={required} type=\"email\">\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Email\"}\n              placeholder={\"Email\"}\n              submitError={errors.email}\n            />\n          }}\n        </Field>\n        <Field name=\"password\" type=\"password\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Password\"}\n              placeholder={\"Password\"}\n              submitError={errors.password}\n            />\n          }}\n        </Field>\n        <Field name=\"confirm\" type=\"password\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Confirm password\"}\n              placeholder={\"Confirm\"}\n              submitError={null}\n            />\n          }}\n        </Field>\n        <Field name=\"first_name\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"First Name\"}\n              placeholder={\"First Name\"}\n              submitError={errors.first_name}\n            />\n          }}\n        </Field>\n        <Field name=\"last_name\">\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Last Name\"}\n              placeholder={\"Last Name\"}\n              submitError={errors.last_name}\n            />\n          }}\n        </Field>\n        <Field name=\"city\">\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"City\"}\n              placeholder={\"City\"}\n              submitError={errors.city}\n            />\n          }}\n        </Field>\n        <Field name=\"gender\">\n          {({input, meta}) => {\n            return <SimpleSelect\n              input={input}\n              meta={meta}\n              label=\"Gender\"\n              submitError={errors.gender}\n              options={genderOptions}\n            />\n          }}\n        </Field>\n        <Field name=\"age\" type=\"number\" validate={required}>\n          {({input, meta}) => {\n            return <SimpleField\n              input={input}\n              meta={meta}\n              label={\"Age\"}\n              placeholder={\"Age\"}\n              submitError={errors.age}\n            />\n          }}\n        </Field>\n        {errors.general && <div>{errors.general}</div>}\n        <div>\n          <Button variant=\"contained\" color=\"primary\" type=\"submit\" size=\"large\">\n            Submit\n          </Button>\n        </div>\n      </form>\n    )\n  }\n}\n\n\nRegisterForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  errors: PropTypes.object.isRequired,\n}\n\n\nconst mapStateToProps = state => ({\n  errors: state.registerErrors,\n});\n\nexport default connect(mapStateToProps, null)(RegisterForm);\n\n\n\n\n\n\n\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {Redirect} from \"react-router-dom\";\nimport {Form} from \"react-final-form\";\nimport PropTypes from \"prop-types\";\nimport {Card, Typography} from \"@material-ui/core\";\n\n\nimport {register} from \"../../../app/actionCreators\";\nimport RegisterForm from \"./Form\";\n\n\nconst style = {\n  minWidth: '50%',\n  minHeight: '200px',\n  padding: '20px',\n  margin: '40px',\n  textAlign: 'center',\n  justifyContent: 'center'\n}\n\n\nconst validateForm = values => {\n  if (values.password !== values.confirm) {\n    return {\n      confirmPassword: \"Passwords mismatch\"\n    }\n  }\n}\n\n\nclass RegisterPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {redirect: false};\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  async handleSubmit(form) {\n    const isSuccess = await this.props.register(form);\n    if (isSuccess) {\n      this.setState({redirect: true});\n    }\n  }\n\n  render() {\n\n    return (\n      <>\n        {this.state.redirect ?\n          <Redirect to={{pathname: \"/login\"}}/> :\n          <Card style={style}>\n            <Typography variant=\"h4\" component=\"h2\">\n              Register\n            </Typography>\n            <Form\n              component={RegisterForm}\n              onSubmit={this.handleSubmit}\n              validate={validateForm}\n            />\n          </Card>\n        }\n      </>);\n  }\n}\n\nRegisterPage.propTypes = {\n  register: PropTypes.func\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    register,\n  }, dispatch)\n}\n\nexport default connect(null, mapDispatchToProps)(RegisterPage);\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport {Field, Form} from \"react-final-form\";\nimport {required, SimpleField} from \"../../common\";\nimport {bindActionCreators} from \"redux\";\nimport {addHobby, deleteHobby} from \"../../../app/actionCreators\";\nimport {connect} from \"react-redux\";\nimport {Button, Chip} from \"@material-ui/core\";\n\nconst chipStyle = {\n  marginTop: '5px',\n  marginRight: '5px',\n}\n\nclass EditableHobbies extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.addHobby = this.addHobby.bind(this);\n  }\n\n  addHobby(values, form) {\n    this.props.addHobby(values.hobby);\n    setTimeout(() => form.restart(), 0);\n  }\n\n  deleteHobby(id) {\n    this.props.deleteHobby(id);\n  }\n\n  render() {\n    const {hobbies} = this.props;\n    const alreadyAdded = value => hobbies.find(hobby => hobby.name === value) ? 'Already added' : null;\n    const composeValidators = (...validators) => value =>\n      validators.reduce((error, validator) => error || validator(value), undefined)\n\n\n    return (\n      <div>\n        {hobbies.map(hobby => {\n          return <Chip\n            key={'hobby_' + hobby.id}\n            label={hobby.name}\n            onDelete={() => this.deleteHobby(hobby.id)}\n            style={chipStyle}/>\n        })}\n        <Form onSubmit={this.addHobby}>\n          {props => (\n            <form onSubmit={props.handleSubmit} style={{marginTop: '10px'}}>\n              <Field name=\"hobby\" validate={composeValidators(alreadyAdded, required)} type=\"text\">\n                {({input, meta}) => {\n                  return <SimpleField\n                    input={input}\n                    meta={meta}\n                    label={\"Hobby\"}\n                  />\n                }}\n              </Field>\n              <Button\n                style={{marginTop: '15px'}}\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"submit\"\n                size=\"large\">\n                Submit\n              </Button>\n            </form>\n          )}\n        </Form>\n      </div>\n    );\n  }\n}\n\nEditableHobbies.propTypes = {\n  hobbies: PropTypes.array.isRequired,\n  addHobby: PropTypes.func,\n  deleteHobby: PropTypes.func\n}\n\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({addHobby, deleteHobby}, dispatch)\n}\n\n\nexport default connect(null, mapDispatchToProps)(EditableHobbies);\n\n\n\n\n\n\n","import React from 'react';\n\nimport {bindActionCreators} from \"redux\";\nimport {getFriendRequestUsers} from \"../../../app/actionCreators\";\nimport {connect} from \"react-redux\";\nimport {REQUEST_STATUSES} from \"../../../app/utils\";\nimport UserCard from \"../../common/components/UserCard\";\nimport PropTypes from \"prop-types\";\nimport {Grid} from \"@material-ui/core\";\n\n\nclass FriendRequests extends React.Component {\n\n\n  componentDidMount() {\n    const {userData} = this.props;\n    const friendRequests = userData.friendRequests;\n    const ids = friendRequests.map(req =>\n      req.from_user === userData.user.id ? req.to_user : req.from_user\n    )\n    this.props.getFriendRequestUsers(ids);\n  }\n\n  render() {\n    const {friendRequestUsers, friendRequests, user} = this.props.userData;\n    let users = friendRequestUsers;\n    if (!this.props.showDeclined) {\n      const declinedIds = friendRequests\n        .filter(req => req.status !== REQUEST_STATUSES.DECLINED)\n        .map(req => req.from_user === user.id ? req.to_user : req.from_user)\n      users = users.filter(user => declinedIds.find(id => id === user.id))\n    }\n\n    return <Grid item container spacing={2} justify=\"space-between\" direction=\"row\">\n      {users.map(user => <Grid item xs={6} key={'friend_request_user_' + user.id}>\n          <UserCard user={user}/>\n        </Grid>\n      )}\n    </Grid>\n  }\n}\n\nFriendRequests.propTypes = {\n  showDeclined: PropTypes.bool.isRequired\n}\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({getFriendRequestUsers}, dispatch)\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FriendRequests);\n\n\n\n\n\n\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {bindActionCreators} from 'redux';\nimport {getUser, getFriends, clearUser, clearUsers} from '../../../app/actionCreators';\nimport {Hobbies, UserInfo, UserCard} from '../../common';\nimport EditableHobbies from './EditableHobbies';\nimport FriendRequests from './FriendRequests';\nimport {Card, Grid, Typography, FormControlLabel, Checkbox} from '@material-ui/core';\n\nconst cardStyle = {\n  padding: '20px',\n  height: '100%',\n  marginTop: '10px'\n}\n\nconst gridStyle = {\n  marginTop: '40px',\n  padding: '20px'\n}\n\nclass UserPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showDeclinedFriendRequests: true\n    }\n  }\n\n  componentDidMount() {\n    const {id, getUser, getFriends} = this.props;\n    getUser(id);\n    getFriends(id);\n  }\n\n  componentWillUnmount() {\n    const {clearUser, clearUsers} = this.props;\n    clearUser();\n    clearUsers();\n  }\n\n\n  render() {\n    const {id, user, users, userData} = this.props;\n    const {showDeclinedFriendRequests} = this.state;\n    const isMyPage = Number(id) === userData.user.id;\n    const friends = isMyPage ? userData.friends : users;\n\n    return <Grid item container spacing={2} justify='space-between' direction='row'>\n      <Grid item xs={6}>\n        <Card style={cardStyle}>\n          <Typography variant='h5' component='h2'>\n            Common info\n          </Typography>\n          {user && user.id && <UserInfo user={user}/>}\n        </Card>\n      </Grid>\n      <Grid item xs={6}>\n        <Card style={cardStyle}>\n          <Typography variant='h5' component='h2'>\n            Hobbies\n          </Typography>\n          {isMyPage ? <EditableHobbies hobbies={userData.user.hobbies}/> :\n            <Hobbies hobbies={user ? user.hobbies : []}/>}\n        </Card>\n      </Grid>\n      {(isMyPage && !!userData.friendRequests.length) && <>\n        <Grid item xs={12} style={gridStyle}>\n          <Typography variant='h5' component='h2' style={\n            {justifyContent: 'space-between', display: 'flex'}}\n          >\n            Friend requests\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={showDeclinedFriendRequests}\n                  onChange={() => this.setState({\n                    showDeclinedFriendRequests: !showDeclinedFriendRequests\n                  })}\n                  name='showDeclined'\n                  color='primary'\n                />\n              }\n              label='Show declined requests'\n            />\n          </Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <FriendRequests showDeclined={showDeclinedFriendRequests}/>\n        </Grid>\n      </>}\n      <Grid item xs={12} style={gridStyle}>\n        <Typography variant='h5' component='h2'>\n          Friends\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <Grid item container spacing={2} justify='space-between' direction='row' xs={12}>\n          {friends.map(user => <Grid item xs={6} key={'friend_' + user.id}>\n              <UserCard user={user}/>\n            </Grid>\n          )}\n        </Grid>\n      </Grid>\n    </Grid>\n  }\n}\n\nUserPage.propTypes = {\n  id: PropTypes.string.isRequired,\n  user: PropTypes.object,\n  accessToken: PropTypes.object,\n  getUser: PropTypes.func.isRequired,\n  getFriends: PropTypes.func.isRequired,\n  clearUser: PropTypes.func.isRequired,\n  clearUsers: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  userData: state.userData,\n  users: state.users,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getUser, getFriends, clearUser, clearUsers\n  }, dispatch)\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\nimport {Button, Card, Grid} from \"@material-ui/core\";\n\nimport {SimpleField} from \"../../common\";\n\nconst style = {\n  minWidth: '100%',\n  marginTop: '10px',\n  marginBottom: '10px',\n  textAlign: 'center',\n  justifyContent: 'center'\n}\n\n\nexport default class SearchForm extends React.Component {\n\n  render() {\n    const {handleSubmit} = this.props;\n\n    return (\n      <Card style={style}>\n        <form onSubmit={handleSubmit}>\n          <Grid container justify=\"center\" spacing={1}>\n            <Grid item>\n              <Field name=\"first_name\" type=\"text\" parse={value => value || ''} initialValue={''}>\n                {({input, meta}) => {\n                  return <SimpleField\n                    input={input}\n                    meta={meta}\n                    label={\"First Name\"}\n                    placeholder={\"First Name\"}\n                  />\n                }}\n              </Field>\n            </Grid>\n            <Grid item>\n              <Field name=\"last_name\" type=\"text\" parse={value => value || ''} initialValue={''}>\n                {({input, meta}) => {\n                  return <SimpleField\n                    input={input}\n                    meta={meta}\n                    label={\"Last Name\"}\n                    placeholder={\"Last Name\"}\n                  />\n                }}\n              </Field>\n            </Grid>\n            <Grid item style={{marginTop:'auto', marginBottom: 'auto'}}>\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\" size=\"large\">\n                Submit\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      </Card>\n    )\n  }\n}\n\nSearchForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n}\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {bindActionCreators} from \"redux\";\nimport {Form} from \"react-final-form\";\nimport {Button, Container, Grid, Typography} from \"@material-ui/core\";\n\n\nimport {getUsers, clearUsers} from \"../../../app/actionCreators\";\nimport SearchForm from \"./Form\";\nimport UserCard from \"../../common/components/UserCard\";\n\nconst PAGE_LIMIT = 100;\n\nconst style = {\n  backgroundColor: '#f5f5f5',\n  minWidth: '100%',\n  minHeight: '50px',\n  padding: '10px',\n  textAlign: 'center',\n  marginBottom: '10px',\n  justifyContent: 'center'\n}\n\n\nclass UsersPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      isAll: false,\n      lastQuery: {\n        first_name: '',\n        last_name: ''\n      }\n    }\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handlePage = this.handlePage.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.getUsers('', '', 1, PAGE_LIMIT);\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const {users} = this.props;\n    if (prevProps.users.length === users.length) {\n      return\n    }\n    let isAll = false;\n    if (users.length < PAGE_LIMIT) {\n      isAll = true;\n    }\n    this.setState({...this.state, isAll});\n  }\n\n  componentWillUnmount() {\n    this.props.clearUsers();\n  }\n\n  handleSubmit(values) {\n    this.props.getUsers(values.first_name, values.last_name, 1, PAGE_LIMIT);\n    this.setState({...this.state, lastQuery: values});\n  }\n\n  handlePage(pageNum) {\n    const {lastQuery} = this.state;\n    this.props.getUsers(lastQuery.first_name, lastQuery.last_name, pageNum, PAGE_LIMIT);\n    this.setState({...this.state, page: pageNum});\n  }\n\n\n  render() {\n    const {users} = this.props;\n    const {page, isAll} = this.state;\n\n\n    return (\n      <Container>\n        <Form\n          component={SearchForm}\n          onSubmit={this.handleSubmit}\n        />\n          <Grid item container spacing={2} justify=\"space-between\" direction=\"row\">\n            {users.map(user => <Grid item xs={6} key={'user_' + user.id}>\n                <UserCard user={user}/>\n              </Grid>\n            )}\n            {!users.length && <Typography variant=\"h5\" component=\"h2\" style={{marginBottom: \"10px\"}}>\n              Users not found\n            </Typography>}\n          </Grid>\n        {(page > 1) && <Button\n          variant=\"contained\"\n          color=\"primary\"\n          type=\"submit\"\n          size=\"large\"\n          style={{marginRight: '10px'}}\n          onClick={() => this.handlePage(page - 1)}>\n          Previous\n        </Button>}\n        {!isAll && <Button\n          variant=\"contained\"\n          color=\"primary\"\n          type=\"submit\"\n          size=\"large\"\n          style={{marginRight: '10px'}}\n          onClick={() => this.handlePage(page + 1)}>\n          Next\n        </Button>}\n      </Container>\n    );\n  }\n}\n\nUsersPage.propTypes = {\n  getUsers: PropTypes.func.isRequired,\n  clearUsers: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  users: state.users,\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({getUsers, clearUsers}, dispatch)\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersPage);\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport {Link} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\n\nconst myMessage = {\n  backgroundColor: '#F8F8FF'\n}\n\nclass Message extends React.Component {\n\n\n  render() {\n    const {user, message, currentUser} = this.props;\n    const isMyMessage = currentUser.id === user.id;\n    const align = isMyMessage ? \"right\" : \"left\";\n    return (\n      <ListItem style={isMyMessage ? myMessage : {}}>\n        <Grid container>\n          <Grid item xs={12}>\n            <ListItemText align={align}>\n              <Link to={`/${user.id}`}>{user.first_name}</Link>\n            </ListItemText>\n          </Grid>\n          <Grid item xs={12}>\n            <ListItemText align={align} primary={message.text}/>\n          </Grid>\n          <Grid item xs={12}>\n            <ListItemText align={align} secondary={(new Date(message.created * 1000)).toDateString()}/>\n          </Grid>\n        </Grid>\n      </ListItem>\n    );\n  }\n}\n\nMessage.propTypes = {\n  user: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.userData.user,\n});\n\n\nexport default connect(mapStateToProps, null)(Message);\n\n\n\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Field} from 'react-final-form';\nimport {Button, Grid} from \"@material-ui/core\";\n\nimport {SimpleField} from \"../../common\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst style = {\n  minWidth: '100%',\n  marginTop: 10,\n  marginBottom: 10,\n}\n\n\nexport default class MessageForm extends React.Component {\n\n  render() {\n    const {handleSubmit, form, submitting, pristine} = this.props;\n\n    return (\n      <form onSubmit={async event => {await handleSubmit(event);form.reset()}} style={style}>\n        <Grid container component={Paper}>\n          <Grid item xs={10}>\n            <Field name=\"text\">\n              {({input, meta}) => {\n                return <SimpleField input={input} meta={meta} style={{minWidth: '90%'}} label=\"Message\"/>\n              }}\n            </Field>\n          </Grid>\n          <Grid item xs={2} style={{marginTop: 'auto', marginBottom: 'auto'}}>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              type=\"submit\"\n              size=\"large\"\n              disabled={submitting || pristine}>\n              Send\n            </Button>\n          </Grid>\n        </Grid>\n      </form>\n    )\n  }\n}\n\nMessageForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n}\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {animateScroll} from \"react-scroll\";\n\nimport {\n  getChatUser,\n  clearChatUser,\n  getMessages,\n  clearMessages,\n  sendMessage\n} from \"../../../app/actionCreators\";\n\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\n\nimport {Form} from \"react-final-form\";\n\nimport Message from \"./Message\";\nimport MessageForm from \"./Form\";\nimport {Button} from \"@material-ui/core\";\n\nconst PAGE_LIMIT = 10;\n\n\nconst chatStyle = {\n  width: '100%',\n  height: '70vh',\n  marginTop: 10,\n  minWidth: 650,\n  overflowY: 'auto'\n}\n\n\nclass ChatPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      isAll: false,\n    }\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.scrollToBottom = this.scrollToBottom.bind(this);\n    this.handleOlder = this.handleOlder.bind(this);\n  }\n\n\n  componentDidMount() {\n    const {getMessages, getChatUser, chatUserId, chat} = this.props;\n    getChatUser(chatUserId);\n    getMessages(chatUserId, 0, 1, PAGE_LIMIT);\n\n    this.interval = setInterval(() => {\n      const messages = this.props.chat.messages;\n      const lastMessage = messages[messages.length - 1];\n      if (lastMessage) {\n        getMessages(chatUserId, lastMessage.created, 1, PAGE_LIMIT);\n      }\n    }, 2 * 1000);\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const prevMessages = prevProps.chat.messages;\n    const messages = this.props.chat.messages;\n\n    const lastPrevMessage = prevMessages[prevMessages.length - 1];\n    const lastMessage = messages[messages.length - 1];\n\n    if (lastPrevMessage !== lastMessage) {\n      this.scrollToBottom();\n    }\n  }\n\n  componentWillUnmount() {\n    const {clearChatUser, clearMessages} = this.props;\n    clearChatUser();\n    clearMessages();\n    clearInterval(this.interval);\n  }\n\n  scrollToBottom() {\n    animateScroll.scrollToBottom({containerId: \"scroll-end\", duration: 0});\n  }\n\n  handleSubmit(form) {\n    const {sendMessage, chatUserId} = this.props;\n    sendMessage(chatUserId, form.text);\n  }\n\n  async handleOlder(page) {\n    const {getMessages, chatUserId} = this.props;\n    const isNotEmpty = await getMessages(chatUserId, 0, page, PAGE_LIMIT);\n    this.setState({...this.state, page: page, isAll: !isNotEmpty});\n  }\n\n  render() {\n\n    const {chat, currentUser} = this.props;\n    const {page, isAll} = this.state;\n    const users = [chat.user, currentUser];\n    const isReady = chat.user.id && currentUser.id;\n    return (\n      <>\n        <Grid container component={Paper} style={chatStyle} id=\"scroll-end\">\n          <Grid item xs={12}>\n            <List>\n              {!isAll && <Button\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"submit\"\n                size=\"small\"\n                style={{marginLeft: '10px'}}\n                onClick={() => this.handleOlder(page + 1)}>\n                Older messages\n              </Button>}\n              {isReady && chat.messages.map(m =>\n                <Message user={users.find(u => u.id === m.author_id)} message={m} key={m.id}/>)}\n            </List>\n            <Divider/>\n          </Grid>\n        </Grid>\n        <Form onSubmit={this.handleSubmit} component={MessageForm}/>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  chat: state.chat,\n  currentUser: state.userData.user\n});\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    getChatUser, clearChatUser, getMessages, clearMessages, sendMessage\n  }, dispatch)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatPage);\n","import React from 'react';\r\nimport {BrowserRouter as Router, Switch, Route,} from \"react-router-dom\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {getUserData} from \"./app/actionCreators\";\r\nimport {connect} from \"react-redux\";\r\nimport {Container, Grid} from \"@material-ui/core\";\r\n\r\nimport {AuthRedirect, NotAuthRedirect} from \"./components/common\";\r\nimport {LoginPage, RegisterPage, UserPage, UsersPage, ChatPage} from \"./components/pages\";\r\nimport Header from \"./components/common/components/Header\";\r\nimport {Notification} from \"./components/common\";\r\n\r\nimport './style.css'\r\n\r\nclass App extends React.Component {\r\n\r\n\r\n  componentDidMount() {\r\n    const {userData, getUserData} = this.props;\r\n    const {isAuthenticated, authentication, user} = userData;\r\n    if (isAuthenticated && user.id === 0) {\r\n      getUserData(authentication.user_id);\r\n    }\r\n    this.interval = setInterval(() => {\r\n      const {isAuthenticated, authentication} = this.props.userData;\r\n      if (isAuthenticated) {\r\n        getUserData(authentication.user_id);\r\n      }\r\n    }, 20 * 1000);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    const {userData, getUserData} = this.props;\r\n    const stateChanged = prevProps.userData.isAuthenticated !== userData.isAuthenticated;\r\n    if (stateChanged && userData.isAuthenticated) {\r\n      getUserData(userData.authentication.user_id);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.interval);\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <Router>\r\n        <Header/>\r\n        <Notification/>\r\n        <Container>\r\n          <Grid>\r\n            <Grid container justify='center'>\r\n              <Switch>\r\n                <Route path=\"/login\">\r\n                  <AuthRedirect>\r\n                    <LoginPage/>\r\n                  </AuthRedirect>\r\n                </Route>\r\n                <Route path=\"/register\">\r\n                  <AuthRedirect>\r\n                    <RegisterPage/>\r\n                  </AuthRedirect>\r\n                </Route>\r\n                <Route path=\"/chat/:id\" render={({match}) =>\r\n                  <NotAuthRedirect>\r\n                    <ChatPage\r\n                      key={match.params.id}\r\n                      chatUserId={match.params.id}\r\n                    />\r\n                  </NotAuthRedirect>\r\n                }>\r\n                </Route>\r\n                <Route path=\"/:id\" render={({match}) =>\r\n                  <UserPage\r\n                    key={match.params.id}\r\n                    id={match.params.id}/>\r\n                }>\r\n                </Route>\r\n                <Route path=\"/\">\r\n                  <UsersPage/>\r\n                </Route>\r\n              </Switch>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n  userData: state.userData,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators({\r\n    getUserData\r\n  }, dispatch)\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {Provider} from 'react-redux';\r\n\r\nimport App from './App';\r\nimport {store} from './app/store';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App/>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}